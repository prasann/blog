<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Random Presence]]></title><description><![CDATA[Random presence of my thoughts and learning...]]></description><link>https://prasans.info</link><generator>RSS for Node</generator><lastBuildDate>Mon, 25 Jan 2021 19:28:04 GMT</lastBuildDate><item><title><![CDATA[Scaling Applications Using Micro-Frontends]]></title><description><![CDATA[Cross posted from  Archimydes blog This blog post is a summary of a presentation that I made at the Archimydes Mastermind Event that…]]></description><link>https://prasans.info/scaling-applications-using-microfrontends/</link><guid isPermaLink="false">https://prasans.info/scaling-applications-using-microfrontends/</guid><content:encoded>&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Cross posted from &lt;a href=&quot;https://archimydes.dev/fourthact/blog/scaling-applications-using-micro-frontends&quot;&gt;Archimydes blog&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This blog post is a summary of a presentation that I made at the Archimydes Mastermind Event that happened on 17th Dec 2020.&lt;/p&gt;
&lt;p&gt;Modern web applications tend to have complex and feature-heavy Frontends when compared to backends.&lt;/p&gt;
&lt;p&gt;With so many choices for frameworks and programming paradigms, building a consistent Frontend to scale is a challenging problem to solve. We cover ways in which you can scale your Frontend application and your development teams by using a Micro-Frontends design pattern.&lt;/p&gt;
&lt;p&gt;I’ll start by introducing the pattern of Micro-frontends first. Then we’ll be looking into some of the key decisions that need to be taken while starting a Micro-frontend project. Finally, we will see the circumstances where this pattern will be effective.&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;1. Scaling Applications&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://dev-to-uploads.s3.amazonaws.com/i/t05e2wbqpej8kmbsokwu.png&quot; alt=&quot;Alt Text&quot;&gt;&lt;/p&gt;
&lt;p&gt;In general, scaling applications implies scaling backend applications to serve an increasing number of users. Usually, it’s about how to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Increase Performance&lt;/li&gt;
&lt;li&gt;Reduce Latency&lt;/li&gt;
&lt;li&gt;Sustain load&lt;/li&gt;
&lt;li&gt;Manage compute costs&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;All these parameters are typically applicable for the backend applications.&lt;/p&gt;
&lt;p&gt;For frontend applications, we typically stop with a good CDN to deliver static assets efficiently. However,&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Scaling frontend apps is also about scaling development teams, both by size (growing a size of a single team) or count (multiple teams)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Additionally, applications are getting more frontend heavy because: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;backends are getting easier to deploy and get off the ground&lt;/li&gt;
&lt;li&gt;end-user compute is getting cheaper and more powerful everyday&lt;/li&gt;
&lt;li&gt;more functionality is being pushed to end-user interfaces and devices&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As a result of this, product teams need to figure out an efficient way to build and deliver frontend applications with multiple development teams working at scale. Product teams need to execute this while reducing bottlenecks in the development process.&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;2. Monoliths, Microservices and Micro-frontends&lt;/strong&gt;&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Monoliths are not a bad design choice&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It’s always best to start any application as a monolith. Upfront slicing of module boundaries is very hard and tends to go wrong. As the application grows, it’s better to identify module boundaries and split them up.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Microservices&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;From monoliths, the best choice to evolve the backend services as microservices. We can then guarantee:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Strong module boundaries&lt;/li&gt;
&lt;li&gt;Independent deployment&lt;/li&gt;
&lt;li&gt;Polyglot development and tech diversity&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;However, most of the microservices I have seen are as follows&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://dev-to-uploads.s3.amazonaws.com/i/nuebx9g3wdu3majah2vb.png&quot; alt=&quot;Alt Text&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Independent deployments ! == Independent releases&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Teams are able to develop and deploy backends independently. However, they need to wait for the frontend to be developed and deployed.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Enter Micro-frontends&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Micro-frontends are nothing but taking the concept of micro-services to the frontend. Slice the frontend of the application to respect the module boundaries of the backend, and create an end-end independent release path.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://dev-to-uploads.s3.amazonaws.com/i/9d2qmlu0vjmlmewy8okz.png&quot; alt=&quot;Alt Text&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;All of Microservices’ promises + Independent releases&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;&lt;strong&gt;Gains with Micro-frontends&lt;/strong&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Independent teams&lt;/li&gt;
&lt;li&gt;Independent releases&lt;/li&gt;
&lt;li&gt;Simple, decoupled codebases&lt;/li&gt;
&lt;li&gt;Incremental upgrades&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;strong&gt;Problems that need solving&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;T&lt;strong&gt;&lt;em&gt;o ‘share, or not to share’?&lt;/em&gt;&lt;/strong&gt; - Code reusability is one of the most overrated principles in software development. The problems of reusability are often ignored or not shared. In going the micro-frontend way, this needs to be discussed among the teams. Out of the gate, a duplicate first strategy works since it allows teams to execute faster initially.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Application loading performance&lt;/strong&gt; - Micro-frontends can cause an impact on the loading performance of the application. There are ways to mitigate it, but the effort it takes has to be taken into consideration.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Design consistency across the application -&lt;/strong&gt; Having a larger number of people working on an application will lead to inconsistencies. Again, there are ways to mitigate this, however, the effort involved in mitigation needs to be considered.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;strong&gt;3. Key decisions while doing Micro-frontends&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Let’s go over some of the major decisions that we need to take during the early stages of a micro-frontend application. I will try to cover the solution(s) that we took while building an application with distributed teams across 3 regions for 2 years. The decisions can vary based on the project context but nevertheless these problems need to be solved.&lt;/p&gt;
&lt;p&gt;In order to explain the challenges and decision, I will take up the following use-case:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Building an application to allow user to configure and buy a laptop. Similar to that of Apple’s.&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;A user can &lt;strong&gt;&lt;em&gt;configure&lt;/em&gt;&lt;/strong&gt; a laptop with various components, accessories, protection plans, etc. The user should be able to &lt;strong&gt;&lt;em&gt;search&lt;/em&gt;&lt;/strong&gt; for accessories, or maybe built-in models, and then finally should be able to &lt;strong&gt;&lt;em&gt;order&lt;/em&gt;&lt;/strong&gt; the product and get it fulfilled.&lt;/p&gt;
&lt;p&gt;Apart from the 3 services - configure, search, and order, I will have another service called “Frame” merely to hold the application together. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Frame&lt;/strong&gt;: A business logic agnostic orchestrator service that knows how to download the rest of the services’ frontend&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;A) Composing multiple front-ends into a single application&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;End users don’t care about the tech used. Their experience should not be affected due to tech.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Composing multiple frontends into a single application is one of the first problems that needs solving when choosing micro-frontends.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://dev-to-uploads.s3.amazonaws.com/i/kjkuca7j5cmgwv1xrv2j.png&quot; alt=&quot;Alt Text&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Composing front-ends&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;We can achieve this composition in 2 ways, let’s go over the pros and cons of these approaches.&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;Build-time Composition vs Run-time Composition&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Build-time composition&lt;/strong&gt; is where multiple frontend applications are built as a single big application and served. This can be accomplished using &lt;strong&gt;npm&lt;/strong&gt; or &lt;strong&gt;yarn&lt;/strong&gt; packages.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://dev-to-uploads.s3.amazonaws.com/i/oti842ift4lgax80gzx4.png&quot; alt=&quot;Alt Text&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pros:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Good dependency management, resulting in smaller bundles&lt;/li&gt;
&lt;li&gt;Independent cross team development&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Cons:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A monolith built by different teams&lt;/li&gt;
&lt;li&gt;Non atomic deployments&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;A Run-time composition&lt;/strong&gt; is where the frontends get integrated into the browser directly when the user requests a page. This may be done on the “Server-Side” or in the “Client-Side”&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://dev-to-uploads.s3.amazonaws.com/i/32r5lsxq4maapemmdfyw.png&quot; alt=&quot;Alt Text&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pros:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Independent teams with independent deployments&lt;/li&gt;
&lt;li&gt;Atomic deployments, so no versioning issues&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Cons:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Too many API requests from Client(?), with increased bundle size&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Toolkit options for Runtime composition&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Server side:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SSI (Server Side Includes)&lt;/li&gt;
&lt;li&gt;Tailor (from Zalando)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Client Side:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;JSPM&lt;/li&gt;
&lt;li&gt;SystemJS&lt;/li&gt;
&lt;li&gt;FrintJS&lt;/li&gt;
&lt;li&gt;Single-Spa&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;We chose Run-time composition for the project we worked on. Since our app was rendered on the client-side, it was simpler for us to achieve this.&lt;/em&gt;&lt;/strong&gt; &lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;B) Communication between the frontends&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Multiple frontends need to share data with each other. Though this needs to be minimal, it’s unavoidable. A couple of options to achieve this is by:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;State management tools&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A global store in the application and all frontends using the same library to access the store.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://dev-to-uploads.s3.amazonaws.com/i/nnarg5aev72kj3giaw6x.png&quot; alt=&quot;Alt Text&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Window events&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Another approach could be to utilize the window (DOMs) eventing capability. Below is a sample event.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://dev-to-uploads.s3.amazonaws.com/i/rjirff7pj01uas07g1gu.png&quot; alt=&quot;Alt Text&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;We used to communicate through common redux store and redux events as all the apps in our micro-frontends were using Redux.&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;C) Design Consistency&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;One of the hardest problem to solve for is design consistency. &lt;/p&gt;
&lt;p&gt;In our team, we addressed this challenge by forming guilds. Consider that there are three teams, and each team has a designer assigned to it.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://dev-to-uploads.s3.amazonaws.com/i/0gdgsukkbzw6e1ok7nzc.png&quot; alt=&quot;Alt Text&quot;&gt;&lt;/p&gt;
&lt;p&gt;We formed a guild comprising of all designers and some interested developers. They encompass a virtual team. They take all the design decisions and make sure their respective teams are abiding by the central design tenets.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://dev-to-uploads.s3.amazonaws.com/i/f2gurgtccs3kcmmrn941.png&quot; alt=&quot;Alt Text&quot;&gt;&lt;/p&gt;
&lt;p&gt;Initially, the guild created a style guide for the application. Mainly CSS and the application teams copy-pasted it from the style guide to build components.&lt;/p&gt;
&lt;p&gt;As we developed more features, we started pulling out Higher-order JS components and made them sharable. This is more of an evolution and works well once you have a stable design system in place.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://dev-to-uploads.s3.amazonaws.com/i/i9ods0luts42xf037th4.png&quot; alt=&quot;Alt Text&quot;&gt;&lt;/p&gt;
&lt;p&gt;And also, since the teams were using the same frontend framework (React) it was easier for us to build this component library.&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;D) Testing Strategy&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Deciding on “How to test” is important. Since it’s a relatively newer paradigm and there are lots of moving parts in the application.&lt;/p&gt;
&lt;p&gt;Primarily we will be discussing the “Integration tests” and “Functional tests” from the testing strategy, as there won’t be much difference in the way the “Unit tests” are done.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Integration tests&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Having a lightweight “Consumer Driven Contracts” (CDC) helped us a lot.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://dev-to-uploads.s3.amazonaws.com/i/6ougrsukadzdp0zuixsn.png&quot; alt=&quot;Alt Text&quot;&gt;&lt;/p&gt;
&lt;p&gt;A CDC is where the consumer services’ give some tests to the provider service. A provider has to run all of its consumer services before publishing an artifact for deployment.&lt;/p&gt;
&lt;p&gt;This doesn’t need to be very complex and can be done quickly using some lightweight options without using any big frameworks. But then, it’s all case by case.&lt;/p&gt;
&lt;p&gt;In our scenario, Frame was the consumer of all the services and it shared a simple JSON contract and a small JS test with all of its providers. This ensured that the frame wasn’t broken when a service deployed automatically.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://dev-to-uploads.s3.amazonaws.com/i/pmwz1mfgqeyxdc0ojfwc.png&quot; alt=&quot;Alt Text&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Functional tests&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This is one of my least favorite testing methods, however, like everything else in tech, it does have some staunch supporters and followers. In our case, we only had a few critical and successful user journeys automated using Selenium for functional testing.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://dev-to-uploads.s3.amazonaws.com/i/3pyn3j490o6xmswmuyjm.png&quot; alt=&quot;Alt Text&quot;&gt;&lt;/p&gt;
&lt;p&gt;These journeys cut across multiple services and hence are harder to develop and maintain. Some of the FAQs I usually get on these tests are&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;FAQs&lt;/strong&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Who owns functional tests?&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ans. The product team and business analysts. They define the scenarios for automation.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Who writes functional tests?&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ans. Guild containing QAs from all teams and a few developers.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Who fixes functional tests?&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ans. Team which breaks it.&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;When should you opt for Micro-frontends?&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Micro frontends are not for everyone. It adds significant overhead with development and maintenance.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;A. Distributed self-contained teams, with a need for parallelization&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If your development teams aren’t co-located, and there is a decent amount of parallelization that needs to be done, this could be a reason to implement micro-frontends.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;B. Collaborate with different frameworks in the frontend&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Imagine you are inheriting a legacy application but want to build a new feature with modern design elements, then micro-frontends gives you a good head start.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;C. Teams that have experience building Microservices application, and are willing to take it to the next step&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Most of the points mentioned here are forward-thinking practices. Micro-frontends needs a good solid understanding of the domain and good discipline to contain things within one’s boundary. &lt;/p&gt;
&lt;p&gt;Finally, it’s worth remembering that:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;It’s not a sprint. It’s a marathon.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Micro-frontends adds significant overhead to the overall application. This isn’t desired for smaller applications or for the application that will be built and managed by a single team. The above mentioned challenges are worth solving, only if you are up for a longer run with multiple teams.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Slicing Microservices]]></title><description><![CDATA[Slicing Microservices Building applications using micro-services are becoming a default go-to architecture these days. I have been part of…]]></description><link>https://prasans.info/slicing-microservices/</link><guid isPermaLink="false">https://prasans.info/slicing-microservices/</guid><content:encoded>&lt;h1&gt;Slicing Microservices&lt;/h1&gt;
&lt;p&gt;Building applications using micro-services are becoming a default go-to architecture these days. I have been part of few teams that build and deploy micro-services in a large scale. One question that was always asked within the team is  “Did we slice it right?” &lt;/p&gt;
&lt;p&gt;Slicing a micro-service refers to defining the boundaries of the micro-service. What should the service be responsible for,  what kind of data should it hold, when it should delegate it’s responsibility to another micro-service.&lt;/p&gt;
&lt;p&gt;Below are some of my experiences, that i have seen working.&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;When to do it&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;One of the common behaviour we did in the teams I worked so far, is to let micro-services evolve organically. We add feature/capabilities to the existing service and later trim down the service by spawning a new one. &lt;/p&gt;
&lt;p&gt;Some of the benefits,&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;No need of upfront discussion. Most likely we will have lesser information about the feature, then likely that our design might reflect the incompetencies.&lt;/li&gt;
&lt;li&gt;Spawning a new service will have it’s own cost. How much ever you automate, it still adds up the infrastructure cost, maintenance cost. If we are wrong about the slicing then we had to spend some more time and effort to unify it with some other service.&lt;/li&gt;
&lt;li&gt;Once we have built a feature, most of the people in the team will understand the use-case and will have appreciate the need of a separate service. It doesn’t become a single person’s decision or a group of architect’s decision. But a decision that comes from ground up. There  is a better chance for the service the retain it’s shape when it grew this way.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This approach does require a good discipline in having a constant check on the growth of a service. A highly coupled service is very hard to break down later. And if we are too late to cut down a service, it might become an expensive operation too.&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;How to do it&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Here are some of the themes i have come across. I will try to explain with the scenario of add-to-cart application.&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;Entity based slicing&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Very common and obvious start for a new service. Example, &lt;code class=&quot;language-text&quot;&gt;UserService&lt;/code&gt; dealing with the CRUD of a &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; entity in the system. &lt;/p&gt;
&lt;p&gt;It’s easy to draw boundaries as entities, since it’s intuitive for people to see the separation. But whether it’s right? is highly questionable and depends a lot on the use case.&lt;/p&gt;
&lt;p&gt;One of the significant problems, i have seen is that these services will be very much in demand by other service. They entire network becomes very chatty. One can assume the &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; entity will be very much needed at each and every step of the application and will be called many times. Worst, is when the services decided to retain their copy of the data to enhance the performance of the application.&lt;/p&gt;
&lt;p&gt;Orchestrator will become a monolith&lt;/p&gt;
&lt;h3&gt;Journey based slicing&lt;/h3&gt;
&lt;p&gt;Works well for small, independent flows.&lt;/p&gt;
&lt;p&gt;Will end up with common data being duplicated.&lt;/p&gt;
&lt;h3&gt;Best of both worlds&lt;/h3&gt;
&lt;p&gt;Do entity based layering and apply journey based slicing on the top.&lt;/p&gt;
&lt;p&gt;Teams owning journeys and not just entities.&lt;/p&gt;
&lt;h1&gt;Establish contract testing across services&lt;/h1&gt;
&lt;p&gt;Entity services should be more lenient.&lt;/p&gt;
&lt;p&gt;Avoid journry team calling other journey teams.&lt;/p&gt;
&lt;p&gt;Build composite entities wherever needed.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[ACE with React]]></title><description><![CDATA[Atlassian Connect Express (ACE) ACE is a toolkit in node.js to build atlassian connect apps. Like a JIRA, Confluence plugins.  Best way to…]]></description><link>https://prasans.info/ace-with-react/</link><guid isPermaLink="false">https://prasans.info/ace-with-react/</guid><content:encoded>&lt;h2&gt;Atlassian Connect Express (ACE)&lt;/h2&gt;
&lt;p&gt;ACE is a toolkit in node.js to build atlassian connect apps. Like a JIRA, Confluence plugins. &lt;/p&gt;
&lt;p&gt;Best way to start with ACE is to bootstrap from &lt;code class=&quot;language-text&quot;&gt;atlas-connect&lt;/code&gt; Y&lt;a href=&quot;https://bitbucket.org/atlassian/atlassian-connect-express/src/master/&quot;&gt;ou can follow the documentation here to get a sample app up and running in few minutes.&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;ACE and handlebars&lt;/h2&gt;
&lt;p&gt;ACE is a wrapper on top of the &lt;a href=&quot;https://expressjs.com/&quot;&gt;expressjs&lt;/a&gt; and hence the application is pretty much an express application. The bootstrapped application will have both the frontend and the backend part.  For the frontend, ACE by default uses &lt;a href=&quot;https://handlebarsjs.com/&quot;&gt;handlebars&lt;/a&gt; as templating option.&lt;/p&gt;
&lt;p&gt;When you make a API call, the server converts the handlebar templates into HTML and returns.&lt;/p&gt;
&lt;h2&gt;Replace Handlebars views with a SPA&lt;/h2&gt;
&lt;p&gt;As you can see, the above mechanism isn’t tailored to use any single page application. Luckily, ACE doesn’t change lots of things from express and hence we can use the same technique to achieve the goal.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;In this example I’m choosing &lt;a href=&quot;https://reactjs.org/&quot;&gt;React&lt;/a&gt;, however the technique is fairly the same for any SPA framework.&lt;/em&gt;&lt;/strong&gt; Since the idea is fairly simple. Using the framework build the app and deliver it to the browser on the init api call. From then on, the app will be controlled by the browser.&lt;/p&gt;
&lt;h2&gt;Up and running with React.&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;1. Add a route to serve static files.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;To the already bootstrapped ACE project, i added a folder called client, and inside that I used &lt;a href=&quot;https://github.com/facebook/create-react-app&quot;&gt;CRA&lt;/a&gt; to bootstrap my React project. This will be my SPA. Make sure to keep  the built artifact within this folder. In my case it was &lt;code class=&quot;language-text&quot;&gt;{ProjectRoot}/client/build/*&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Now in the express application’s index.js need to modify the route to serve this page. In my case, i used &lt;a href=&quot;https://developer.atlassian.com/cloud/jira/software/modules/page/&quot;&gt;generalPages module&lt;/a&gt; of ACE. In &lt;code class=&quot;language-text&quot;&gt;atlassian-connect.json&lt;/code&gt; I have mentioned &lt;code class=&quot;language-text&quot;&gt;url&lt;/code&gt; to be &lt;code class=&quot;language-text&quot;&gt;/init&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Here is the modified &lt;code class=&quot;language-text&quot;&gt;/init&lt;/code&gt; to serve the react app.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;
      &lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/init&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; addon&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;authenticate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sendFile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;__dirname&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/../client/build/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;index.html&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;you can import the path like this &lt;code class=&quot;language-text&quot;&gt;import path from &amp;#39;path&amp;#39;;&lt;/code&gt; &lt;/p&gt;
&lt;p&gt;2&lt;strong&gt;. Configure static directories for express server.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Next is to set the path variable for the express. You need to define the static directory for the express server to fetch the files from.&lt;/p&gt;
&lt;p&gt;in &lt;code class=&quot;language-text&quot;&gt;app.js&lt;/code&gt; you can configure this.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;
      &lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;express&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; addon &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;/* more config */&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; staticDir &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;__dirname&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;public&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;//*** This line is important **********//&lt;/span&gt;

app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;express&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;static&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;__dirname&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;client&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;build&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;//*** This line is important **********//&lt;/span&gt;
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;express&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;static&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;staticDir&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;Now, we have configured express to look into 2 different directories for static files.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3. Include atlassian JS API as part of the SPA&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Lastly, we need to make a change in the client app. Jira/Confluence when they load their plugin, they expect the plugin to have &lt;code class=&quot;language-text&quot;&gt;all.js&lt;/code&gt; . This is the client side logic of ace. So, we need to include this as part of our React’s &lt;code class=&quot;language-text&quot;&gt;index.html&lt;/code&gt; without this, &lt;strong&gt;&lt;em&gt;the loader in Jira will never disappear&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;In &lt;code class=&quot;language-text&quot;&gt;client/public/index.html&lt;/code&gt; add the script tag just below the body.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;
      &lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;https://connect-cdn.atl-paas.net/all.js&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text/javascript&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;data-options&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;sizeToParent:true;resize:false&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;You can read about more &lt;code class=&quot;language-text&quot;&gt;data-options&lt;/code&gt; &lt;a href=&quot;https://developer.atlassian.com/cloud/jira/software/about-the-javascript-api/&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;That’s it, you will now see the React application in the connect app. &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;*Note:&lt;/strong&gt; In development mode, there isn’t any hot reload in this case. If you make any changes to the react app, need to build the app manually. Ofcourse, you can modify the &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt; to automate this, but &lt;code class=&quot;language-text&quot;&gt;webpack-dev-server&lt;/code&gt; isn’t much helpful.*&lt;/p&gt;
&lt;h2&gt;Authentication within the connect app&lt;/h2&gt;
&lt;p&gt;If you are planning to bundle few APIs along with the react app, then one of the harder thing to crack is authentication. This isn’t documented very clearly anywhere.&lt;/p&gt;
&lt;p&gt;ACE uses a JWT to authenticate api’s and unfortunately the token isn’t accessible for React application since it is running inside a iframe by default. If you are using the default Handlebars, ACE provides  helper methods to access the JWT. &lt;/p&gt;
&lt;h3&gt;Workaround&lt;/h3&gt;
&lt;p&gt;The first call from JIRA/Confluence call will carry the JWT. In the above code snippet &lt;code class=&quot;language-text&quot;&gt;addon.authenticate()&lt;/code&gt; will validate the JWT executes the callback. In this place, we can create a JWT and set it as cookie header. Post that, in all the API calls made from React app, we can validate the JWT against our secret, and it will sort out the issue of authentication.&lt;/p&gt;
&lt;p&gt;Here is a sample code for a Hello world with ACE and React. &lt;a href=&quot;https://github.com/prasann/ace-with-react&quot;&gt;Github Source.&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Centralized error handling in Express applications.]]></title><description><![CDATA[Note: All my examples are in typescript and there are million other ways to achieve similar result, this is just my way of doing things. If…]]></description><link>https://prasans.info/centralized-error-handling-express/</link><guid isPermaLink="false">https://prasans.info/centralized-error-handling-express/</guid><content:encoded>&lt;p&gt;&lt;em&gt;&lt;strong&gt;Note: All my examples are in typescript and there are million other ways to achieve similar result, this is just my way of doing things.&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;If you are looking to start a new application in express, go over to the express site, use &lt;a href=&quot;https://expressjs.com/en/starter/generator.html&quot;&gt;express-generator&lt;/a&gt; to create an application. &lt;/p&gt;
&lt;h2&gt;Error handling&lt;/h2&gt;
&lt;p&gt;By default, any errors that are thrown within your application, will be sent as a 500 response code, along with the error stack trace in the body. This was inconvenient for me since,&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I don’t want the end-user to know the system stack trace.&lt;/li&gt;
&lt;li&gt;I want to use exceptions for errors like &lt;code class=&quot;language-text&quot;&gt;BadRequest&lt;/code&gt; &lt;code class=&quot;language-text&quot;&gt;AuthExceptions&lt;/code&gt; etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So, i decided to tweak the default behaviour and take control of error handling. If your use case is similar, then proceed with further steps.&lt;/p&gt;
&lt;h3&gt;Custom error handler&lt;/h3&gt;
&lt;p&gt;Create your own custom ErrorHandler class (&lt;code class=&quot;language-text&quot;&gt;error_handler.ts&lt;/code&gt;), this will extend the node’s &lt;a href=&quot;https://nodejs.org/api/errors.html#errors_class_error&quot;&gt;Error&lt;/a&gt; class.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;
      &lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;//error_handler.ts&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AppError&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    statusCode&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    message&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;statusCode&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; message&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;statusCode &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; statusCode&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;Now in your application you can invoke this custom error handler by calling,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;
      &lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AppError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;404&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Unable to find the resource&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;//or&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AppError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;403&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;You are not authorized to perform this action&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;Wiring error interceptor into express application&lt;/h3&gt;
&lt;p&gt;Once you start throwing exceptions within your application, next step is to convert those errors into a meaningful response for the end-user. Express app provides a way to hook up a custom error
handler into your application. A middleware that takes in 4 parameters is your way to add your custom error handler.&lt;/p&gt;
&lt;p&gt;Let’s add the custom error handler function in the same &lt;code class=&quot;language-text&quot;&gt;error_handler.ts&lt;/code&gt; class and export. This generic function will parse the thrown error and constructs appropriate response.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;
      &lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;//error_handler.ts&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;customErrorHandler&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;err&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; statusCode&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; message &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;statusCode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;
      &lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; express &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;express&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; customErrorHandler &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;error_handler&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;express&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Other middlewares, routes... &lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Adding your custom error handler.&lt;/span&gt;
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;err&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;customErrorHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;Now, whenever any error that is thrown in the application will be caught by this error handler. This will in turn respond back with appropriate status code.&lt;/p&gt;
&lt;h3&gt;Dealing with unknown errors&lt;/h3&gt;
&lt;p&gt;As you can see, the &lt;code class=&quot;language-text&quot;&gt;customErrorHandler&lt;/code&gt; has a limitation of handling only the errors that are of type &lt;code class=&quot;language-text&quot;&gt;AppError&lt;/code&gt; since it expects &lt;code class=&quot;language-text&quot;&gt;statusCode&lt;/code&gt; to be present in the error.
However, there will be &lt;code class=&quot;language-text&quot;&gt;RuntimeExceptions&lt;/code&gt; that will occur in the application. It’s kind of hard to catch all these sort of errors in the application and re-throw them as custom errors.&lt;/p&gt;
&lt;p&gt;So, we will improve our &lt;code class=&quot;language-text&quot;&gt;customErrorHandler&lt;/code&gt; to handle such &lt;code class=&quot;language-text&quot;&gt;RuntimeExceptions&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;
      &lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;//error_handler.ts&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;handleKnownExceptions&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;err&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;//log it&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; statusCode&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; message &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;statusCode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;handleUnknownExceptions&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;err&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;//log it&lt;/span&gt;
    res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Something went wrong.&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;customErrorHandler&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;err&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    err &lt;span class=&quot;token keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AppError&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleKnownExceptions&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleUnknownExceptions&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;Now, we introduced one more way of handling errors. If the caught error is not that of ours (&lt;code class=&quot;language-text&quot;&gt;AppError&lt;/code&gt;) then we respond back with a 500 response.
We don’t want our end user to know about the system internals and hence respond with a static message.&lt;/p&gt;
&lt;h3&gt;Dealing with asynchronous routes&lt;/h3&gt;
&lt;p&gt;This centralized error handling will not work for the errors that are thrown in the &lt;code class=&quot;language-text&quot;&gt;await&lt;/code&gt; methods i.e, any error that are thrown in an async block will not reach our &lt;code class=&quot;language-text&quot;&gt;customErrorHandler&lt;/code&gt;.
This is a limitation with respect to express 4.x. &lt;/p&gt;
&lt;p&gt;As a workaround, you have to make the routes to be synchronous. Instead of changing all the routes to synchronous blocks i used this
&lt;a href=&quot;https://github.com/Abazhenov/express-async-handler&quot;&gt;middleware&lt;/a&gt; to achieve a similar effect. Post wrapping my routes with this middleware, all the errors in async block will then reach our  &lt;code class=&quot;language-text&quot;&gt;customErrorHandler&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Here is the &lt;a href=&quot;https://gist.github.com/prasann/b6ad07b3962b6ea2953fef027df5d10b&quot;&gt;gist&lt;/a&gt; to the final &lt;code class=&quot;language-text&quot;&gt;error_handler.ts&lt;/code&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Logging in Golang projects]]></title><description><![CDATA[One of the common requirement in any project is to have some additional context while logging. And most of us aren’t consuming the logs…]]></description><link>https://prasans.info/logging-in-golang-projects/</link><guid isPermaLink="false">https://prasans.info/logging-in-golang-projects/</guid><content:encoded>&lt;p&gt;One of the common requirement in any project is to have some additional context while logging. And most of us aren’t consuming the logs directly these days.
We use either ELK stack or some other proprietary tools to consume the logged information.
In these cases, it’s important to know where those logs specifically came from and also important to log it in a format that’s easy to parse and index.&lt;/p&gt;
&lt;p&gt;In our case, we were using splunk and we have built a lots of dashboards based on Splunk logs. So our convention is to log in JSON format and also to log machine information and some more environment based information.&lt;/p&gt;
&lt;p&gt;Here is the post describing how we achieved it using go-lang.&lt;/p&gt;
&lt;h2&gt;Setting up an abstraction for logging&lt;/h2&gt;
&lt;p&gt;We decided to go with logrus as our logging library. Instead of using and importing logrus in all the places, we wrote a layer of abstraction.&lt;/p&gt;
&lt;p&gt;This layer, then exposes various public functions to be consumed by the actual callers. So the logrus usage, is hidden and can be later changed too&lt;/p&gt;
&lt;p&gt;In this layer, we can then inject common variables that needs to be logged as part of all log statements.&lt;/p&gt;
&lt;h2&gt;Logging the caller&lt;/h2&gt;
&lt;p&gt;The moment we introduce the abstraction, we have introduced a problem of losing the actual log position. logrus will log the abstraction layer as the log position for all log statement.&lt;/p&gt;
&lt;p&gt;So, here we are logging the caller as “ContextLogTag”. The caller will be then identified using the  go runtime. We can navigate through the stack in the go runtime to log the caller.&lt;/p&gt;
&lt;p&gt;Here is the code for does that&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;
      &lt;pre class=&quot;language-go&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getCallerInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token boolean&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; filePath&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lineNo&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; isOk &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; runtime&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Caller&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; isOk &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		pathArray &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; strings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filePath&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		fileName &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; pathArray&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pathArray&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Sprintf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;%s#%d&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fileName&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lineNo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;Here is our abstraction layer.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;
      &lt;pre class=&quot;language-go&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; logger

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;fmt&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/sirupsen/logrus&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;log&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;os&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;runtime&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;strings&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; logger &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;logrus&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Logger

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Fields &lt;span class=&quot;token keyword&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	contextLogTag     &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ContextLogTag&quot;&lt;/span&gt;
	errorLogTag       &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ErrorLogTag&quot;&lt;/span&gt;
	deviceLogTag      &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Device ID&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; logEntry &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;logrus&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Entry

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Setup&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	level&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; logrus&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ParseLevel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&amp;lt;&amp;lt;loglevel from env&gt;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Fatalf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

	logger &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;logrus&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Logger&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		Out&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;   os&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Stdout&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		Level&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; level&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	logger&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Formatter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;logrus&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JSONFormatter&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

	logEntry &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; logger&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;WithFields&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;logrus&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Fields&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		deviceLogTag&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;      &lt;span class=&quot;token string&quot;&gt;&quot;&amp;lt;&amp;lt;deviceId from env&gt;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;errMessage &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fields &lt;span class=&quot;token keyword&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; fields &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;range&lt;/span&gt; fields &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			logEntry &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; logEntry&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;WithField&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	logEntry&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
		&lt;span class=&quot;token function&quot;&gt;WithField&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;contextLogTag&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getCallerInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
		&lt;span class=&quot;token function&quot;&gt;WithField&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;errorLogTag&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
		&lt;span class=&quot;token function&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;errMessage&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Fatal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;errMessage &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fields &lt;span class=&quot;token keyword&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; fields &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;range&lt;/span&gt; fields &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			logEntry &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; logEntry&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;WithField&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	logEntry&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
		&lt;span class=&quot;token function&quot;&gt;WithField&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;contextLogTag&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getCallerInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
		&lt;span class=&quot;token function&quot;&gt;WithField&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;errorLogTag&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
		&lt;span class=&quot;token function&quot;&gt;Fatal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;errMessage&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Info&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;msg &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fields &lt;span class=&quot;token keyword&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; fields &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;range&lt;/span&gt; fields &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			logEntry &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; logEntry&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;WithField&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	logEntry&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;WithField&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;contextLogTag&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getCallerInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Info&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;msg&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Warn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fields &lt;span class=&quot;token keyword&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; args &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; fields &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;range&lt;/span&gt; fields &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			logEntry &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; logEntry&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;WithField&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	logEntry&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Warn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;args&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getCallerInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token boolean&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; filePath&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lineNo&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; isOk &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; runtime&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Caller&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; isOk &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		pathArray &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; strings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filePath&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		fileName &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; pathArray&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pathArray&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Sprintf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;%s#%d&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fileName&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lineNo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;</content:encoded></item><item><title><![CDATA[Add Redux custom middleware dynamically]]></title><description><![CDATA[Redux middlewares  can be used for a variety of things. You can basically tap into a redux event and perform some action with it. Logging…]]></description><link>https://prasans.info/add-redux-middleware-dynamically/</link><guid isPermaLink="false">https://prasans.info/add-redux-middleware-dynamically/</guid><content:encoded>&lt;p&gt;&lt;a href=&quot;https://redux.js.org/advanced/middleware&quot;&gt;Redux middlewares&lt;/a&gt; can be used for a variety of things. You can basically tap into a redux event and perform some action with it. Logging and analytics are very common use cases for Redux middleware.&lt;/p&gt;
&lt;p&gt;In my case, I have a middleware component, that needs to be injected while initializing the Redux store. The middleware component will be served dynamically when the app loads.&lt;/p&gt;
&lt;h3&gt;Exporting the middleware component&lt;/h3&gt;
&lt;p&gt;This middleware detects a specific redux action and persist an information to the local storage. It’s a custom middleware with a minimal change. This custom function takes in &lt;code class=&quot;language-text&quot;&gt;middlewareAPI&lt;/code&gt; as the parameter instead of having the state.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;persistInfo&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token parameter&quot;&gt;middlewareAPI&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token parameter&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;SOME_ACTION&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;middlewareAPI&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;listen&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;localStorage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setItem&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;PERSIST_THIS_INFO&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  
  &lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; persistInfo&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;Loading the custom middleware&lt;/h3&gt;
&lt;p&gt;Here is a small utility function that can take in a custom middleware and initialize the store.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;  &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; createStore&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; compose &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;redux&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; reducers &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./reducers&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  
  &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Store&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; composeEnhancers &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; window &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;object&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
          window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;
            window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; compose&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;store &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createStore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;reducers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    
      &lt;span class=&quot;token function&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;store&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    
      &lt;span class=&quot;token function&quot;&gt;addMiddleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;middleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; middlewareAPI &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          getState&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token function-variable function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token parameter&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dispatch &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;compose&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;middleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;middlewareAPI&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dispatch&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Store&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;This is my store class with the store initialization happens in the constructor. Simply, importing this store class and calling the &lt;code class=&quot;language-text&quot;&gt;addMiddleware&lt;/code&gt; function it’s possible to inject the custom middleware component to your redux store.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Start nginx when upstream is unavailable]]></title><description><![CDATA[Upstreams in Nginx  is an nginx directive to define groups of servers. Servers can listen on differnt ports, and it is possible to mix and…]]></description><link>https://prasans.info/start-nginx-when-upstream-unavailable/</link><guid isPermaLink="false">https://prasans.info/start-nginx-when-upstream-unavailable/</guid><content:encoded>&lt;h3&gt;Upstreams in Nginx&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;upstream&lt;/code&gt; is an nginx directive to define groups of servers. Servers can listen on differnt ports, and it is possible to mix and match the UNIX-domain sockets and TCP connections. You can read about it &lt;a href=&quot;http://nginx.org/en/docs/http/ngx_http_upstream_module.html&quot;&gt;here.&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Issue with upstream&lt;/h3&gt;
&lt;p&gt;If you are using proxy_pass with upstream definitions in nginx config, then nginx checks for the server availability during the startup phase. A sample nginx.conf with upstream is here, lots of the .conf file is redacted to focus on the point in discussion.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;nginx&quot;&gt;
      &lt;pre class=&quot;language-nginx&quot;&gt;&lt;code class=&quot;language-nginx&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;http&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;upstream&lt;/span&gt; service&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;a &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;server&lt;/span&gt; service&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;a&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;ip&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;or&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        
        &lt;span class=&quot;token keyword&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;service&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;a&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;proxy_pass&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;service&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;a&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;In the above mentioned scenario, nginx server will check for service-a while start-up phase. If service-a is down, you will see an error like host not found in upstream service-a&lt;/p&gt;
&lt;h3&gt;The Workaround&lt;/h3&gt;
&lt;p&gt;This workaround is for services running in local setup in different docker containers. So, instead of using &lt;code class=&quot;language-text&quot;&gt;upstream&lt;/code&gt; directive you can directly point your service-discoverable-name in the proxy pass. The only thing while running docker containers, you need to add an additional nginx directive &lt;code class=&quot;language-text&quot;&gt;resolver&lt;/code&gt; and make it point to docker’s internal DNS resolver. 127.0.0.11 The above mentioned config can be re-written as mentioned.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;nginx&quot;&gt;
      &lt;pre class=&quot;language-nginx&quot;&gt;&lt;code class=&quot;language-nginx&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;http&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;resolver&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;127.0&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.11&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        
        &lt;span class=&quot;token keyword&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;service&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;a&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;proxy_pass&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;service&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;a&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;ip&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;or&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;em&gt;Note: nginx approach is very valid in production like setups. However, in developer boxes it may not be possible to have all the services running while nginx starts. The workaround mentioned here should be mostly used in local or in dev setup and not advisable to use in prodcution like setup.&lt;/em&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Dealing with SOAP in clojure]]></title><description><![CDATA[Simple Object Access Protocol (SOAP) SOAP brings its own protocol and focuses on exposing pieces of application logic (not data) as services…]]></description><link>https://prasans.info/soap-call-in-clojure-compojure-with-saaj/</link><guid isPermaLink="false">https://prasans.info/soap-call-in-clojure-compojure-with-saaj/</guid><content:encoded>&lt;h3&gt;Simple Object Access Protocol (SOAP)&lt;/h3&gt;
&lt;p&gt;SOAP brings its own protocol and focuses on exposing pieces of application logic (not data) as services. SOAP is focused on accessing named operations, each implements some business logic through different interfaces. This image below expresses the difference between a SOAP and normal REST/JSON endpoint very well.&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/soap-primer-7d9ce5ab887476bc5832d0fe1d924a35-48538.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 55.25%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAAB70lEQVQoz3VSTW/aQBD1v4IDF6r8BTjyBzhw4RyRFAVBhHuIOOSEgtRDVA6WkiiBC00UkFIqgVAoRLgmEBDG4F1/gT9YezsGlUZVO1qtNLMz7828WYb+x7ytvY8Qx16ryxWWtMXUwHOXbJhtHnVd/7xPxhh3Op09yoZQDamL4bMyGyriK54JgAXF3vb8Mcdx2u321dV1o/FVEGg2556fe9ksRQtDm/+UJ4PluI9nQ58ZCFst2mzSep1Opz4KIW69XmfZT5eXn5+eXu8q9PbWubkhhmYZ8sxAorVSTF3xmTFWT06kXG5zeEgeHggUAxww12o1uHl+sOv8n7owoij2ej8wXgnCGGNlF+V5fjQawdi6roPbbpPHRw9aGwz8GT3X28nDrNdrSZIQkvv9HqRaliXL8g5C07SLi5JtmxxHz868j8ebL2XiC/S7D8a2bX1rwAN+oVDI5/PQTqvVSiaToVAoFoudnubv7xvwaqiKrhimjkxN3q/K22+1XC6zLFssFkGzeDweDAYTiUQ0Gj04+PC9+c3R5stxT357QdOBqSFmP70LQlFarVbT6TTHcYCSyWQCgUAkEkmlUuFw+PjoiLprUXhWpTfY9grPmb8EhJnhbyCEut3uVsseQEwmk1KpVKlUqKXqaG6tVMc0PJf8ApYIPWzkb3Y2AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;&quot;
        alt=&quot;SOAP explanation&quot;
        title=&quot;&quot;
        src=&quot;/static/soap-primer-7d9ce5ab887476bc5832d0fe1d924a35-48538.png&quot;
        srcset=&quot;/static/soap-primer-7d9ce5ab887476bc5832d0fe1d924a35-bed0f.png 200w,
/static/soap-primer-7d9ce5ab887476bc5832d0fe1d924a35-5fd34.png 400w,
/static/soap-primer-7d9ce5ab887476bc5832d0fe1d924a35-48538.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;Source: &lt;a href=&quot;https://stackoverflow.com/a/44713574/419448&quot;&gt;Stack overflow&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Soap With Attachment API for Java (SAAJ)&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.oracle.com/javaee/5/tutorial/doc/bnbhg.html&quot;&gt;SAAJ&lt;/a&gt; is a lower level API in Java that express SOAP messages. Java developers rarely use SAAJ since the JAX WS and Spring WS provides better abstraction over SAAJ.&lt;/p&gt;
&lt;h3&gt;SOAP in Clojure&lt;/h3&gt;
&lt;h4&gt;1. Prerequisite&lt;/h4&gt;
&lt;p&gt;As a one-time step, convert the WSDL into Java objects. This can be done using `wsimport` or `xjc`&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;xjc -wsdl wsdl-file-name&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;or&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;wsimport wsdl-file-name&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h4&gt;2. Build SOAP Message&lt;/h4&gt;
&lt;p&gt;First step is to build a soap message with header and body. The root element of the SOAP body is one of the Java object created in the first step. Construct the Java object with the necessary data. Finally convert the SOAP Message into string.&lt;/p&gt;
&lt;h4&gt;3. Perform POST&lt;/h4&gt;
&lt;p&gt;A simple HTTP POST need to be performed with &lt;code class=&quot;language-text&quot;&gt;Content-Type&lt;/code&gt; header set to &lt;code class=&quot;language-text&quot;&gt;text/xml&lt;/code&gt;. This can be done using normal &lt;code class=&quot;language-text&quot;&gt;clj-http&lt;/code&gt; methods.Authentication should be covered ideally in the SOAP header.&lt;/p&gt;
&lt;h4&gt;4. Parse response into Java Object&lt;/h4&gt;
&lt;p&gt;Finally the response string has to be converted into a SOAP Message again. This is required to parse the SOAP Response Body into one of the generated object.&lt;/p&gt;
&lt;h3&gt;Code in action&lt;/h3&gt;
&lt;p&gt;Here is my &lt;a href=&quot;https://github.com/prasann/soap-clj&quot;&gt;Github repository&lt;/a&gt; with a small working application.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Asynchronous calls in React component]]></title><description><![CDATA[All network calls that are necessary to load data needed by the component should go inside  From React docs componentDidMount() is invoked…]]></description><link>https://prasans.info/using-network-call-in-react/</link><guid isPermaLink="false">https://prasans.info/using-network-call-in-react/</guid><content:encoded>&lt;p&gt;All network calls that are necessary to load data needed by the component should go inside &lt;code class=&quot;language-text&quot;&gt;componentDidMount()&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;h5&gt;&lt;a href=&quot;https://facebook.github.io/react/docs/react-component.html#componentdidmount&quot;&gt;From React docs&lt;/a&gt;&lt;/h5&gt;
&lt;p&gt;componentDidMount() is invoked immediately after a component is mounted. Initialization that requires DOM nodes should go here. If you need to load data from a remote endpoint, this is a good place to instantiate the network request. Setting state in this method will trigger a re-rendering.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;Why not inside &lt;code class=&quot;language-text&quot;&gt;constructor()&lt;/code&gt;?&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;If you make a fetch for a component in constructor, and the user navigates away from the page containing that component before the request completes, it will still try to setState on that component despite being unmounted, and React will throw an error.&lt;/li&gt;
&lt;li&gt;If your component fails to load, still you will end up making an unnecessary server-request.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Why not in &lt;code class=&quot;language-text&quot;&gt;componenentWillMount()&lt;/code&gt;?&lt;/h4&gt;
&lt;p&gt;This function is invoked immediately before mounting occurs. So, obviously this appears to be a best place to place the call to load data. However that’s not the case.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Even if you add the network call in componentWillMount, your request will almost certainly not finish before the component is rendered. There is no way to pause the rendering till the request returns. So you will end up re-rendering the component anyways.&lt;/li&gt;
&lt;li&gt;This is the only lifecycle hook called on server rendering. So, if you are serving from the backend, this will be executed twice.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Flyway migrations in lein clojure]]></title><description><![CDATA[Leiningen  is the easiest way to start with clojure project automation. The project under discussion is a webservices written in clojure…]]></description><link>https://prasans.info/use flyway with leiningen/</link><guid isPermaLink="false">https://prasans.info/use flyway with leiningen/</guid><content:encoded>&lt;p&gt;&lt;a href=&quot;https://leiningen.org/&quot;&gt;Leiningen&lt;/a&gt; is the easiest way to start with clojure project automation. The project under discussion is a webservices written in clojure with &lt;a href=&quot;https://github.com/metosin/compojure-api&quot;&gt;compojure-api&lt;/a&gt; and &lt;a href=&quot;https://github.com/ring-clojure/ring&quot;&gt;ring&lt;/a&gt; middleware.&lt;/p&gt;
&lt;p&gt;When it came to Database migrations, I didn’t find anything straightforward amongst the lein plugins. So, decided to use &lt;a href=&quot;https://flywaydb.org/&quot;&gt;flyway&lt;/a&gt;. I have worked with flyway in the past with Java applications. But, this is the first time with clojure, leiningen combination.&lt;/p&gt;
&lt;h3&gt;Migration utility in clojure&lt;/h3&gt;
&lt;p&gt;Here is the small migration helper written in Clojure&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;clojure&quot;&gt;
      &lt;pre class=&quot;language-clojure&quot;&gt;&lt;code class=&quot;language-clojure&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;ns&lt;/span&gt; app.migration
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:require&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;environ.core &lt;span class=&quot;token operator&quot;&gt;:refer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:import&lt;/span&gt; org.flywaydb.core.Flyway
           org.flywaydb.core.internal.info.MigrationInfoDumper&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;;; Build DB String from the Environment Variables&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;db&lt;/span&gt;-url &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;jdbc:postgresql://&quot;&lt;/span&gt;
                 &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;env &lt;span class=&quot;token operator&quot;&gt;:pg-db-host&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;:&quot;&lt;/span&gt;
                 &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;env &lt;span class=&quot;token operator&quot;&gt;:pg-db-port&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;env &lt;span class=&quot;token operator&quot;&gt;:pg-db-name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;;; Initialize Flyway object&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; flyway
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;locations &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;into-array&lt;/span&gt; String &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;classpath:db/migration&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;doto&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; Flyway&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;.setDataSource &lt;span class=&quot;token number&quot;&gt;db&lt;/span&gt;-url &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;env &lt;span class=&quot;token operator&quot;&gt;:pg-db-user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;env &lt;span class=&quot;token operator&quot;&gt;:pg-db-password&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;into-array&lt;/span&gt; String &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;.setLocations locations&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;defn&lt;/span&gt; migrate &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;.migrate flyway&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;defn&lt;/span&gt; clean &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;.clean flyway&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;defn&lt;/span&gt; reset &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;clean&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;migrate&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;defn&lt;/span&gt; info &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;println&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;MigrationInfoDumper/dumpToAsciiTable &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;.all &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;.info flyway&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;Running migration during deployment&lt;/h3&gt;
&lt;p&gt;I’m using &lt;a href=&quot;https://github.com/weavejester/lein-ring&quot;&gt;lein-ring&lt;/a&gt; plugin, this provided an option to execute function before the handler starts. So, I wired app.migrate to the init block of the handler.&lt;/p&gt;
&lt;p&gt;This helps to run migration everytime before the application deploys. Ofcourse, flyway will take care of what migrations need to run based on the migration version.&lt;/p&gt;
&lt;h3&gt;Running migrations for local development&lt;/h3&gt;
&lt;p&gt;The above method works perfectly for the application deployment scenarios. However, in local it will be better to execute​ ​migration and clean databases as and when required, rather than re-deploying the application. lein-exec plugin offers​ ​a way to create and execute clojure code from project.clj files. With the above-mentioned migration present, all ​I​​ ha​ve to do is to create some aliases as shown below.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;clojure&quot;&gt;
      &lt;pre class=&quot;language-clojure&quot;&gt;&lt;code class=&quot;language-clojure&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;:aliases&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;token string&quot;&gt;&quot;db-clean&quot;&lt;/span&gt;   &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;exec&quot;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;-ep&quot;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;(use &apos;deal-picker.migration) (clean)&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;db-migrate&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;exec&quot;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;-ep&quot;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;(use &apos;deal-picker.migration) (migrate)&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;db-info&quot;&lt;/span&gt;    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;exec&quot;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;-ep&quot;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;(use &apos;deal-picker.migration) (info)&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;db-reset&quot;&lt;/span&gt;   &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;exec&quot;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;-ep&quot;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;(use &apos;deal-picker.migration) (reset)&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;</content:encoded></item><item><title><![CDATA[Card slider using CSS Keyframes]]></title><description><![CDATA[CSS Keyframes  is a powerful feature to create animations in CSS. Below is a small snippet I created for slider like animation. Most of the…]]></description><link>https://prasans.info/card_slider_using_css3/</link><guid isPermaLink="false">https://prasans.info/card_slider_using_css3/</guid><content:encoded>&lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/CSS/%40keyframes&quot;&gt;CSS Keyframes&lt;/a&gt; is a powerful feature to create animations in CSS.&lt;/p&gt;
&lt;p&gt;Below is a small snippet I created for slider like animation.&lt;/p&gt;
&lt;iframe height=&quot;275&quot; style=&quot;width: 100%;&quot; scrolling=&quot;no&quot; title=&quot;Slider&quot; src=&quot;//codepen.io/prasann/embed/ppNLNL/?height=265&amp;theme-id=0&amp;default-tab=css,result&quot; frameborder=&quot;no&quot; allowtransparency=&quot;true&quot; allowfullscreen=&quot;true&quot;&gt;
  See the Pen &lt;a href=&apos;https://codepen.io/prasann/pen/ppNLNL/&apos;&gt;Slider&lt;/a&gt; by Prasanna
  (&lt;a href=&apos;https://codepen.io/prasann&apos;&gt;@prasann&lt;/a&gt;) on &lt;a href=&apos;https://codepen.io&apos;&gt;CodePen&lt;/a&gt;.
&lt;/iframe&gt;
&lt;p&gt;Most of the browsers do support keyframes now. &lt;a href=&quot;https://caniuse.com/#feat=css-animation&quot;&gt;Here&lt;/a&gt; is the “Can I Use” page for keyframes.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Storing a function in the Redux store]]></title><description><![CDATA[Redux  is a predictable state container for Javascript. Redux state has to be serializable all the time. Object serialization is the process…]]></description><link>https://prasans.info/store_function_inside_redux_store/</link><guid isPermaLink="false">https://prasans.info/store_function_inside_redux_store/</guid><content:encoded>&lt;p&gt;&lt;a href=&quot;https://redux.js.org/&quot;&gt;Redux&lt;/a&gt; is a predictable state container for Javascript. Redux state has to be serializable all the time.&lt;/p&gt;
&lt;p&gt;Object serialization is the process of converting an object’s state to a string from which it can later be restored.&lt;/p&gt;
&lt;p&gt;So, if you are trying to store a function inside the Redux state, you need to serialize them before persisting.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Storing functions inside redux state is not a best practice in general. So try to avoid it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Javascript functions can be serialized quite easily, the challenge is in retrieving them from the store to execute.&lt;/p&gt;
&lt;p&gt;Below are the helper functions for persisting functions inside Redux state.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;  &lt;span class=&quot;token comment&quot;&gt;//Returns a string&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;serializeFunction&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;func&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;//serializeFunction(()=&gt;console.log(&apos;Hello!!&apos;))&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Output ==&gt; &quot;()=&gt;console.log(&apos;Hello!!&apos;)&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;The function to be stored in the state should be converted into string using serializeFunction.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;  &lt;span class=&quot;token comment&quot;&gt;//Returns a function&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;deserializeFunction&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;funcString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;\`&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;funcString&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;\`&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;Convert the string from the redux store into a function using deserializeFunction&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Mock toLocaleString in Jest]]></title><description><![CDATA[We had to use   with a specific country-code.  . This works perfectly in all the browsers. However, not in jest tests. Our Jest tests were…]]></description><link>https://prasans.info/jest_test_toLocaleString_javasscript/</link><guid isPermaLink="false">https://prasans.info/jest_test_toLocaleString_javasscript/</guid><content:encoded>&lt;p&gt;We had to use &lt;code class=&quot;language-text&quot;&gt;toLocaleString&lt;/code&gt; with a specific country-code. &lt;code class=&quot;language-text&quot;&gt;toLocaleString(&amp;#39;de&amp;#39;)&lt;/code&gt;. This works perfectly in all the browsers. However, not in jest tests.&lt;/p&gt;
&lt;p&gt;Our Jest tests were running with &lt;code class=&quot;language-text&quot;&gt;--env=jsdom&lt;/code&gt; I got to know that jsdom and phantomJS aren’t supporting multiple locale implementations.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/ariya/phantomjs/issues/12327&quot;&gt;PhantomJS support locale-specific.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;So, the only solution I found is to mock these methods and test rest of the logic. Here is a sample mock behaviour.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; helpers &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;../src/helpers&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;describe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;formatDate&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;should invoke localString implementation to format date &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; localStringMock &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; jest&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; mockDate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; toLocaleString&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; localStringMock &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    helpers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;formatDate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mockDate&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;localStringMock&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toHaveBeenCalledWith&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;de-DE&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            year&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;numeric&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            month&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;2-digit&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            day&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;2-digit&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            hour&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;2-digit&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            minute&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;2-digit&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; This behaviour is applicable for toLocaleDateString() toLocaleTimeString()&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Spring security session timeouts]]></title><description><![CDATA[Using Spring security we were building an application which has 2 types of users Internal and External. Our requirement was Internal and…]]></description><link>https://prasans.info/expire_session_after_timeout_spring/</link><guid isPermaLink="false">https://prasans.info/expire_session_after_timeout_spring/</guid><content:encoded>&lt;p&gt;Using Spring security we were building an application which has 2 types of users Internal and External. Our requirement was&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Internal and External users have different idle timeouts.&lt;/li&gt;
&lt;li&gt;External user’s session should be invalidated after 30 mins. Irrespective of whether the user is active or not.&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;Setting up Idle timeout in Spring security&lt;/h4&gt;
&lt;p&gt;Spring provides out of box option to configure an idle timeout value. This invalidation is done by Spring security and happens while making a request after specified amount of time.&lt;/p&gt;
&lt;p&gt;We were able to achieve this by setting up setMaxInactiveIntervalInSeconds on the session object while creation.&lt;/p&gt;
&lt;h4&gt;Setting up Max timeout in Spring security&lt;/h4&gt;
&lt;p&gt;The above technique can be used only for setting the idle time. But our second scenario is to invalidate the session irrespective of whether the user is active or not.&lt;/p&gt;
&lt;p&gt;We ended up writing a custom filter which to invalidate the session manually whenever the session age is greater than the specified value.&lt;/p&gt;
&lt;p&gt;This filter will invalidate the session when the maximum time has reached for that session.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Angular resource and http interceptor]]></title><description><![CDATA[Once you set up your project with angular and  ngResource  you will be able to access $resource object. $resource will serve as a factory…]]></description><link>https://prasans.info/angular_resource_and_interceptors/</link><guid isPermaLink="false">https://prasans.info/angular_resource_and_interceptors/</guid><content:encoded>&lt;p&gt;Once you set up your project with angular and &lt;a href=&quot;https://docs.angularjs.org/api/ngResource&quot;&gt;ngResource&lt;/a&gt; you will be able to access $resource object.&lt;/p&gt;
&lt;p&gt;$resource will serve as a factory which creates a resource object that lets you interact with RESTful services. You can call HTTP methods directly on this resource object.&lt;/p&gt;
&lt;p&gt;In our application we will have a custom wrapper on top of the angular resource. This wrapper will provide ability for us to transform the object differently on success and error response.&lt;/p&gt;
&lt;p&gt;All adapters will use the wrapper and all end points will overwrite the transform logic on success and error response.&lt;/p&gt;
&lt;p&gt;‘profile’: {
method: ‘GET’,
params: {accountId: ‘@accountId’},
transformRequest: (data) =&gt; {
const moreParams = {newParams: data};
return angular.toJson(moreParams);
},
successTransformResponse: (data, headers, status) =&gt; {
// Handle parsing for HTTP status 200.
},
errorTransformResponse: (data, headers, status) =&gt; {
// Depending on the status code handle transform logic.
}
}&lt;/p&gt;
&lt;h4&gt;Handling generic error codes&lt;/h4&gt;
&lt;p&gt;So, next we have to handle generic error responses across the application. Error codes like 401 (Unauthorized), 503 (Service Unavailable) needs to be redirected to different pages.&lt;/p&gt;
&lt;p&gt;The interceptors are service factories that are registered with the $httpProvider by adding them to the $httpProvider.interceptors array. The factory is called and injected with dependencies (if specified) and returns the interceptor.&lt;/p&gt;
&lt;p&gt;$provide.factory(‘myHttpInterceptor’, function($q, dep1, dep2) {
return {
‘request’: function(config) {
// do something on success
return config;
},
‘responseError’: function(rejection) {
// do something on error
if (canRecover(rejection)) {
return responseOrNewPromise
}
return $q.reject(rejection);
}
}
}&lt;/p&gt;
&lt;p&gt;In the responseError method block, we used to handle all the generic error response code across the application.&lt;/p&gt;
&lt;h4&gt;Observation&lt;/h4&gt;
&lt;p&gt;I was expecting the code in HttpInterceptor to be executed before my transform logic in the resource wrapper. But i was wrong. Only after the resource transformation http interceptors are called. (Refer this &lt;a href=&quot;https://github.com/angular/angular.js/issues/7594&quot;&gt;issue.&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;So, whenever a service responds with 500 error, Http interceptor will redirect the user to a different page. However, this will not happen if there is an error in transformation logic. In order to circumvent this problem, we started writing our error transform response specifically for the error codes. This means that, our transformation logic will not be executed for our generic error codes and eventually it reaches http interceptor.&lt;/p&gt;
&lt;p&gt;{{ site.data.comments }}&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Post browser logs to server in an Angular app]]></title><description><![CDATA[We were looking for an efficient way of capturing all the Javascript errors from browsers in our backend so it appears in our Kibana…]]></description><link>https://prasans.info/post_errors_to_an_endpoint_angular/</link><guid isPermaLink="false">https://prasans.info/post_errors_to_an_endpoint_angular/</guid><content:encoded>&lt;p&gt;We were looking for an efficient way of capturing all the Javascript errors from browsers in our backend so it appears in our Kibana dashboard along with the server logs&lt;/p&gt;
&lt;p&gt;We had a Angular 1.5.8 application in front of multiple micro-services endpoint. Any error in the angular application will appear in the browser console and we planned to push these logs back to the server.&lt;/p&gt;
&lt;h4&gt;Angular’s &lt;em&gt;$exceptionHandler&lt;/em&gt;&lt;/h4&gt;
&lt;p&gt;In order to catch all the exceptions, we have to override the $exceptionHandler component provided by angular. Only catch here is that, since we are overriding angular component we may not be able to inject $http or any other angular component in our overrides and doing so will throw a cyclic dependency issue.&lt;/p&gt;
&lt;h4&gt;Initial solution&lt;/h4&gt;
&lt;p&gt;We came up with an idea of injecting $injector and fetching $http using the same.&lt;/p&gt;
&lt;p&gt;factory(‘$exceptionHandler’, [‘$log’, ‘$window’, ‘$injector’,
($log, $window, $injector)=&gt; {
return (exception, cause) =&gt; {
$log.error(exception, cause);
try {
const $http = $injector.get(‘$http’);
const logMessage = [{
level: ‘error’,
message: exception.toString(),
url: $window.location.href,
stackTrace: exception.stack,
currentTimestamp: Date.now()
}];
$http.post(‘/log/message’, logMessage);
} catch (loggingError) {
$log.log(loggingError);
}
);&lt;/p&gt;
&lt;p&gt;The above piece of code will work perfectly and will be able to post all the errors generated to an exposed endpoint.&lt;/p&gt;
&lt;p&gt;But the problem is, if the $http.post throws any exception then it causes unrecoverable recursion and browser will hung.&lt;/p&gt;
&lt;p&gt;In order to come out of that issue, we re wrote our http post logic using native JS syntax.&lt;/p&gt;
&lt;h4&gt;Final solution&lt;/h4&gt;
&lt;p&gt;Same code re written using native JS functions.&lt;/p&gt;
&lt;p&gt;factory(‘$exceptionHandler’, [‘$log’, ‘$window’, ‘$injector’, ($log, $window, $injector)=&gt; {
return (exception, cause) =&gt; {
$log.error(exception, cause);
try {
let commonHeaders = $injector.get(‘$http’).defaults.headers.common;
const logMessage = [{
level: ‘error’,
message: exception.toString(),
url: $window.location.href,
stackTrace: exception.stack,
currentTimestamp: Date.now()
}];
let xmlhttp = new XMLHttpRequest();
xmlhttp.open(‘POST’, ‘/log/message’);
xmlhttp.setRequestHeader(‘Content-Type’, ‘application/json;charset=UTF-8’);
for (let header in commonHeaders) {
if (commonHeaders.hasOwnProperty(header)) {
let headerValue = commonHeaders[header];
if (angular.isFunction(headerValue)) {
headerValue = headerValue();
}
xmlhttp.setRequestHeader(header, headerValue);
}
}
xmlhttp.send(angular.toJson(logMessage));
} catch (loggingError) {
$log.log(loggingError);
}
};&lt;br&gt;
});&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Expanding Amazon EBS Volume in a EC2 instance.]]></title><description><![CDATA[I had an AWS image which was created using an EC2 instance of size 8 GB. Whenever i try to launch an instance i usually change the storage…]]></description><link>https://prasans.info/expanding_amazon_ebs_volumes/</link><guid isPermaLink="false">https://prasans.info/expanding_amazon_ebs_volumes/</guid><content:encoded>&lt;p&gt;I had an AWS image which was created using an EC2 instance of size 8 GB. Whenever i try to launch an instance i usually change the storage size to something say 20 GB. But once the system is launched when i do a&lt;/p&gt;
&lt;p&gt;df -h&lt;/p&gt;
&lt;p&gt;i still see 8 GB and not 20 GB.&lt;/p&gt;
&lt;p&gt;On further reading i understood i need to resize the disk size. So i did the same using&lt;/p&gt;
&lt;p&gt;sudo resize2fs /dev/xvde1&lt;/p&gt;
&lt;p&gt;But i was getting the following error:&lt;/p&gt;
&lt;p&gt; The filesystem is already *** blocks long. Nothing to do!&lt;/p&gt;
&lt;p&gt;Then to reolve this issue i have to perform the following steps.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SSH to the machine.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;fdisk /dev/xvde&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;You should be seeing this message.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;WARNING: DOS-compatible mode is deprecated. It’s strongly recommended to switch off the mode (command ‘c’) and change display units to sectors (command ‘u’)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Enter ‘u’ to change display units&lt;/li&gt;
&lt;li&gt;Enter ‘p’ to view the current paritions.&lt;/li&gt;
&lt;li&gt;Enter ‘d’ to delete current partitions.&lt;/li&gt;
&lt;li&gt;Enter ‘n’ to create a new partition.&lt;/li&gt;
&lt;li&gt;Enter ‘p’ to set it as primary partitions.&lt;/li&gt;
&lt;li&gt;Enter ‘1’ to set it as primary partitions.&lt;/li&gt;
&lt;li&gt;Set the desired space. If nothing is given the entire space is allotted.&lt;/li&gt;
&lt;li&gt;Enter ‘a’ to make it bootable.&lt;/li&gt;
&lt;li&gt;Enter ‘1’ and ‘w’ to write and save the changes.&lt;/li&gt;
&lt;li&gt;Reboot the instance from AWS console.&lt;/li&gt;
&lt;li&gt;Now if you resize the parition it worked all fine.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;sudo resize2fs /dev/xvde1&lt;/p&gt;
&lt;p&gt;Check the partition size, it should be all set with more space.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Set deployed Git revision using Capistrano 3]]></title><description><![CDATA[We use Capistrano to deploy our Rails application. Recently i upgraded our capistrano version from 2 to 3 Capistrano 3 has a complete DSL…]]></description><link>https://prasans.info/capistrano_set_deployed_revision/</link><guid isPermaLink="false">https://prasans.info/capistrano_set_deployed_revision/</guid><content:encoded>&lt;p&gt;We use Capistrano to deploy our Rails application. Recently i upgraded our capistrano version from 2 to 3&lt;/p&gt;
&lt;p&gt;Capistrano 3 has a complete DSL changeover. Apart from this one other major change I figured out was the way a Git repository is been deployed.&lt;/p&gt;
&lt;p&gt;Previously a Git repository is cloned in the deploy location. Now in Cap 3 a Git archive is been downloaded to the deploy location. This means the deploy directory is no more a Git repository. During Cap 2 times, we used to run a ‘git log’ command in the deployed driectory to find the deployed revision. Now after upgrade I am unable to do this.&lt;/p&gt;
&lt;p&gt;Cap 3 has got a REVISION file, which contain the SHA of the deployed commit. This wasn’t useful in our case, as we show this message in our web application.&lt;/p&gt;
&lt;p&gt;So i ended up writing a Cap task using a similar logic to create a REVISION file with our custom formatted Git message.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;namespace :deploy do
  task :add\_revision\_file do
    on roles(:app) do
      within repo\_path do
        execute(:git, :&amp;#39;log&amp;#39;, :&amp;quot;--pretty=format:&amp;#39;%h | %ai | %d %s&amp;#39;&amp;quot;, :&amp;#39;-1&amp;#39;,
        :&amp;quot;#{fetch(:branch)}&amp;quot;, &amp;quot;&amp;gt;#{release\_path}/REVISION&amp;quot;)
      end
    end
  end
end


after &amp;#39;deploy:updating&amp;#39;, &amp;#39;deploy:add\_revision\_file&amp;#39;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;This will overwrite the REVISION file created by Cap with our custom message. Which will be consumed by our application.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[UrlGenerationError after upgrading to Rails 4.2]]></title><description><![CDATA[On upgrading my rails app from 4.0 to 4.2.5 i steeped onto a wierd issue where my form _ for tag breaks and starts throwing exception. A…]]></description><link>https://prasans.info/url_generation_error_after_upgrading_rails/</link><guid isPermaLink="false">https://prasans.info/url_generation_error_after_upgrading_rails/</guid><content:encoded>&lt;p&gt;On upgrading my rails app from 4.0 to 4.2.5 i steeped onto a wierd issue where my form_for tag breaks and starts throwing exception.&lt;/p&gt;
&lt;p&gt;A REST model on new action raised an UrlGenerationError exception because of the form_for tag.&lt;/p&gt;
&lt;p&gt;For ex: if User is a model my form_for looked like this&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;form\_for(@user, url: user\_path(@user)) do |f|&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;Raised exception was&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;No route matches {:action=&amp;gt;&amp;quot;show&amp;quot;, :controller=&amp;gt;&amp;quot;users&amp;quot;, :id=&amp;gt;nil} missing required keys: \[:id\]&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;The @user object’s id is nil since it’s not yet saved in the database. Previously if it was nil that is been skipped by the the url generation. All these occurrences started throwing errors.&lt;/p&gt;
&lt;p&gt;I have to change the form_for tag to&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;form\_for(@user) do |f|&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;This posts the form to default users_path.&lt;/p&gt;
&lt;h3&gt;Nested objects:&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;form\_for(@user, url: user\_address\_path(@user, @address)) do |f|&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;was changed to&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;form\_for(\[@user, @address\]) do |f|&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;</content:encoded></item><item><title><![CDATA[Integrating CKEditor with Rails asset pipeline.]]></title><description><![CDATA[We are using  ckeditor  in our rails application (Rails 4.2). Number of network calls made by the ckeditor and its plugins are quite alot…]]></description><link>https://prasans.info/add_ckeditor_to_rails_pipeline/</link><guid isPermaLink="false">https://prasans.info/add_ckeditor_to_rails_pipeline/</guid><content:encoded>&lt;p&gt;We are using &lt;a href=&quot;http://ckeditor.com/&quot;&gt;ckeditor&lt;/a&gt; in our rails application (Rails 4.2).&lt;/p&gt;
&lt;p&gt;Number of network calls made by the ckeditor and its plugins are quite alot and we were facing difficulty in integrating them with the Rails asset pipeline.&lt;/p&gt;
&lt;p&gt;My initial approach is to use a &lt;a href=&quot;https://github.com/tsechingho/ckeditor-rails&quot;&gt;ckeditor rails gem&lt;/a&gt;. However getting it to work was complicated. On top of it we had some custom plugins written for ckeditor and making it to work with ckeditor rails gem was almost impossible.&lt;/p&gt;
&lt;p&gt;Taking some pointers from this &lt;a href=&quot;https://github.com/galetahub/ckeditor/issues/307&quot;&gt;issue&lt;/a&gt; finally could get into some working solution.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Move all the CKEditor files into vendor/assets/javascript/ckeditor&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;In application.js add&lt;/p&gt;
&lt;p&gt;//= require ckeditor/ckeditor&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ckeditor.js looks up for other ckeditor relative to CKEDITOR_BASEPATH location. So before loading ckeditor in JS add a line to set that environment variable.&lt;/p&gt;
&lt;p&gt;window.CKEDITOR_BASEPATH = ‘/assets/ckeditor/‘;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Add&lt;/p&gt;
&lt;p&gt;config.assets.precompile &amp;#x3C;&amp;#x3C; [‘ckeditor/*’]&lt;/p&gt;
&lt;p&gt;to your application.rb file.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Finally add a file called precompile_hook.rake This rake task will help in compiling the ckeditor files and add it to the assets folder. The content of the rake task is here. &lt;a href=&quot;https://gist.github.com/prasann/c8978041777cb443fb77&quot;&gt;precompile_hook.rake&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Here is the screenshot of the network calls before and after adding ckeditor to asset pipeline.&lt;/p&gt;
&lt;p&gt; &lt;a href=&quot;/assets/images/posts/add_ckeditor_to_rails/full/before.png&quot; title=&quot;Before adding to asset pipeline&quot;&gt;&lt;img src=&quot;/assets/images/posts/add_ckeditor_to_rails/thumbs/before.png&quot; alt=&quot;Before adding to asset pipeline&quot;&gt;&lt;/a&gt; &lt;a href=&quot;/assets/images/posts/add_ckeditor_to_rails/full/after.png&quot; title=&quot;After adding to asset pipeline&quot;&gt;&lt;img src=&quot;/assets/images/posts/add_ckeditor_to_rails/thumbs/after.png&quot; alt=&quot;After adding to asset pipeline&quot;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;Even after adding ckeditor to asset pipeline the it did not effectively reduce all calls into one. Still the ckeditor’s plugin calls are been fired separately.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Deploying Jekyll site for Github pages through rake script]]></title><description><![CDATA[This blog is powered by Jekyll and I use Github pages as web server. Branch structure in Github Github by default publish the contents of…]]></description><link>https://prasans.info/deploying-jekyll-blog-through-rake-script/</link><guid isPermaLink="false">https://prasans.info/deploying-jekyll-blog-through-rake-script/</guid><content:encoded>&lt;p&gt;This blog is powered by Jekyll and I use Github pages as web server.&lt;/p&gt;
&lt;h4&gt;Branch structure in Github&lt;/h4&gt;
&lt;p&gt;Github by default publish the contents of the master branch as a github page. So i have created two branches in the repository.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;source:&lt;/strong&gt; contains Jekyll based folder structure. _drafts, _posts, _site etc. All the new posts are added in the drafts folder first and then once its written fully it is then moved to _posts folder and are then ready to be published.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;master:&lt;/strong&gt; is simply a generated content from the rake script. This branch has all the HTML files that are generated using Jekyll gem.&lt;/p&gt;
&lt;h4&gt;Folder structure in Dev box&lt;/h4&gt;
&lt;p&gt;I have both the branches checked out in different folders. Both these folders are present in the same level (will be useful while generating output)&lt;/p&gt;
&lt;h4&gt;Rake script&lt;/h4&gt;
&lt;h5&gt;To generate HTML&lt;/h5&gt;
&lt;p&gt;I have the Rakefile in the root level of my source branch. The rake task mentioned below will create HTML equivalent inside the _site folder.&lt;/p&gt;
&lt;p&gt;task :generate do
Jekyll::Site.new(Jekyll.configuration({
“source”      =&gt; ”.”,
“destination” =&gt; ”_site”
})).process
end
&lt;/p&gt;
&lt;h5&gt;To publish in Github&lt;/h5&gt;
&lt;p&gt;This task copies the entire _site folder into the master branch (locally). This is why i need to checkout both master and source branches separately and keep them in the same level.&lt;/p&gt;
&lt;p&gt;After copying the contents, simply it switches to the master branch and does a git push.&lt;/p&gt;
&lt;p&gt;Once the changes are pushed into github’s master branch the changes are then reflected in your site immediately.&lt;/p&gt;
&lt;p&gt;task :publish =&gt; [:generate] do
cp_r ”_site/.”, LOCAL_DIR_NAME
cp “.travis.yml”, LOCAL_DIR_NAME
pwd = Dir.pwd
Dir.chdir LOCAL_DIR_NAME
system “git add —all”
message = “Site updated at #{Time.now.utc}”
system “git commit -m #{message.inspect}”
system “git push origin master:refs/heads/master”
Dir.chdir pwd
end&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Integrating Netflix Hystrix to a Spring Application]]></title><description><![CDATA[After reading Martin Fowler’s  Circuit breaker post  i thought of implementing the same to my application. While looking for possible…]]></description><link>https://prasans.info/integrating-netflix-hystrix-to-a-spring-application/</link><guid isPermaLink="false">https://prasans.info/integrating-netflix-hystrix-to-a-spring-application/</guid><content:encoded>&lt;p&gt;After reading Martin Fowler’s &lt;a href=&quot;http://martinfowler.com/bliki/CircuitBreaker.html&quot;&gt;Circuit breaker post&lt;/a&gt; i thought of implementing the same to my application. While looking for possible approaches to this solution i stepped onto Hystrix.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Netflix/Hystrix&quot;&gt;Hystrix&lt;/a&gt; is a latency and fault tolerance library designed to isolate points of access to remote systems, services and 3rd party libraries, stop cascading failure. Using this implementing CircuitBreakers are quite straight forward.&lt;/p&gt;
&lt;p&gt;To start with i wanted to measure the latency of the 3rd party calls that goes through my application. Mine was Java Spring applcation running in Tomcat. As per Hystrix documentation all the third party calls that need to be monitored are to be wrapped within a command. This command will be executed in a separate thread. Since all the 3rd party calls go through this layer it is easy to monitor those calls. It is also possible to define a fallback approach when a particular service call fails. And there by isolating these scenarios from the application code. More of how this works is explained in detail on &lt;a href=&quot;https://github.com/Netflix/Hystrix/wiki&quot;&gt;Hystrix wiki&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The problem i had was i already have my application up and running. And all i need to do is just monitoring the 3rd party calls (as of now) Now integrating Hystrix meant i need to re design the 3rd party calls to introduce a middle layer to wrap them up.&lt;/p&gt;
&lt;p&gt;I was thinking of writing Aspect based solution to wrap these calls throughout my application with an annotation.&lt;/p&gt;
&lt;p&gt;To do this, make sure you have included Spring AOP in your application. Declare and define an annotation as shown below.&lt;/p&gt;
&lt;p&gt;@Aspect
@Component
public class CircuitBreakerAspect {&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;@Around(&amp;quot;@annotation(com.example.Monitor)&amp;quot;)
public Object monitoringAround(final ProceedingJoinPoint aJoinPoint) throws Throwable {
    String theShortName = aJoinPoint.getSignature().toShortString();
    HystrixCommand.Setter theSetter =
            HystrixCommand.Setter.withGroupKey(HystrixCommandGroupKey.Factory.asKey(theShortName));
    theSetter = theSetter.andCommandKey(HystrixCommandKey.Factory.asKey(theShortName));
    HystrixCommand theCommand = new HystrixCommand(theSetter) {
        @Override
        protected Object run() throws Exception {
            try {
                return aJoinPoint.proceed();
            } catch (Exception e) {
                throw e;
            } catch (Throwable e) {
                throw new Exception(e);
            }
        }
    };
    return theCommand.execute();
}&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;}&lt;/p&gt;
&lt;p&gt;Using Hystrix dashboard you can able to wire the views and could able to monitor the application. More about this is written &lt;a href=&quot;http://www.mirkosertic.de/doku.php/architecturedesign/springhystrix&quot;&gt;here&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;However this annotation approach can be used only for monitoring purposes or when you need to do similar actions for all the services. When i moved onto writing circuit breakers this cannor be done since all the service calls need its own fallback approaches. So in that case it was better to implement them as separate commands so all the code will fit within.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Testing APIary using Dredd.]]></title><description><![CDATA[API Blueprint  is a documentation-oriented API description language. A couple of semantical assumptions over the plain Markdown. Dredd  is a…]]></description><link>https://prasans.info/testing-apiary-using-github-travis/</link><guid isPermaLink="false">https://prasans.info/testing-apiary-using-github-travis/</guid><content:encoded>&lt;p&gt;&lt;a href=&quot;http://apiblueprint.org/&quot;&gt;API Blueprint&lt;/a&gt; is a documentation-oriented API description language. A couple of semantical assumptions over the plain Markdown.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/apiaryio/dredd&quot;&gt;Dredd&lt;/a&gt; is a command-line tool for testing API documentation written in API Blueprint format against its backend implementation.&lt;/p&gt;
&lt;p&gt;I could able to setup dredd quite easily on my Mac by installing Node and npm. However its not quite straight forward in Windows. I faced lots of difficulties while installing node, npm and dredd.&lt;/p&gt;
&lt;p&gt;So i decided to use &lt;a href=&quot;http://travis-ci.org/&quot;&gt;Travis&lt;/a&gt; to setup the testing pipeline for my jobs. All i needed to do is to have a .travis.yml file to install node_js and install dredd using npm.&lt;/p&gt;
&lt;p&gt;Added a simple script file to run the dredd tool inside the job. And that’s it. As part of the code i also checked in the API markdown files which will run againt the APIs&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Making HTTPS call using Apache HttpClient.]]></title><description><![CDATA[This post details about making Secure HTTP(HTTPs) call from a server using Apache HTTPClient library. The simplest will be to ignore the ssl…]]></description><link>https://prasans.info/making-https-call-using-apache-httpclient/</link><guid isPermaLink="false">https://prasans.info/making-https-call-using-apache-httpclient/</guid><content:encoded>&lt;p&gt;This post details about making Secure HTTP(HTTPs) call from a server using Apache HTTPClient library.&lt;/p&gt;
&lt;p&gt;The simplest will be to ignore the ssl certificates and to trust any connection. This approach is not acceptable for production code as it defeat the purpose of using HTTPS. However in some use cases if you want to try out something quickly you can go with this route.&lt;/p&gt;
&lt;h4&gt;Trust any certificate approach (Simple, not recommended for production code.)&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;
      &lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;javax&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;net&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ssl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SSLContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;javax&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;net&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ssl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;X509TrustManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;apache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;client&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;HttpClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;apache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;conn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ssl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SSLConnectionSocketFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;apache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;conn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ssl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SSLContexts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;apache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;impl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;client&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;CloseableHttpClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;apache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;impl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;client&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;HttpClients&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;security&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SecureRandom&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpClientFactory&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CloseableHttpClient&lt;/span&gt; client&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpClient&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getHttpsClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;client &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; client&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;SSLContext&lt;/span&gt; sslcontext &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SSLContexts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;custom&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;useSSL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        sslcontext&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;X509TrustManager&lt;/span&gt;\&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;\&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpsTrustManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SecureRandom&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;SSLConnectionSocketFactory&lt;/span&gt; factory &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SSLConnectionSocketFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sslcontext&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token class-name&quot;&gt;SSLConnectionSocketFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BROWSER\_COMPATIBLE\_HOSTNAME\_VERIFIER&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        client &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpClients&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;custom&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setSSLSocketFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;factory&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; client&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;releaseInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        client &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;The above method will return httpClient object which can be used to make any HTTPS calls. Performing HTTPS call is no different from making HTTP call from now on. So you can have a factory with two methods, one for secure and one for non-secure.&lt;/p&gt;
&lt;p&gt;Here we have used HttpsTrustManager, which will do nothing more than trusing all clients. This is done by simply implementing X509TrustManager and auto generating all the methods.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;
      &lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;security&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;CertificateException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;security&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;X509Certificate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;javax&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;net&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ssl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;X509TrustManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpsTrustManager&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;X509TrustManager&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

	&lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;checkClientTrusted&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;X509Certificate&lt;/span&gt;\&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;\&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; arg0&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; arg1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			&lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CertificateException&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// TODO Auto-generated method stub&lt;/span&gt;

	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

	&lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;checkServerTrusted&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;X509Certificate&lt;/span&gt;\&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;\&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; arg0&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; arg1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			&lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CertificateException&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// TODO Auto-generated method stub&lt;/span&gt;

	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

	&lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;X509Certificate&lt;/span&gt;\&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;\&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getAcceptedIssuers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;X509Certificate&lt;/span&gt;\&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;\&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h4&gt;Importing a keystore (Recommended)&lt;/h4&gt;
&lt;p&gt;If you are writing produciton quality code, then you should be looking at this approach. Have a all the keys in your application and create a SSLContext using those keystores. The created SSLContext can then be injected to SSLConnectionSocketFactory and remaining steps will be the same.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;
      &lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;javax&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;net&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ssl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SSLContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;apache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;client&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;HttpClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;apache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;conn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ssl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SSLConnectionSocketFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;apache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;conn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ssl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SSLContexts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;apache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;impl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;client&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;CloseableHttpClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;apache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;impl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;client&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;HttpClients&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;io&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;io&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;FileInputStream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;io&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;IOException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;security&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;KeyStore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;security&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;KeyStoreException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;security&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;NoSuchAlgorithmException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;security&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;CertificateException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;security&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;KeyManagementException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpClientFactory&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CloseableHttpClient&lt;/span&gt; client&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpClient&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getHttpsClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;client &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; client&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;SSLContext&lt;/span&gt; sslcontext &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getSSLContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;SSLConnectionSocketFactory&lt;/span&gt; factory &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SSLConnectionSocketFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sslcontext&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token class-name&quot;&gt;SSLConnectionSocketFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BROWSER\_COMPATIBLE\_HOSTNAME\_VERIFIER&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        client &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpClients&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;custom&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setSSLSocketFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;factory&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; client&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;releaseInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        client &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SSLContext&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getSSLContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;KeyStoreException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;token class-name&quot;&gt;NoSuchAlgorithmException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CertificateException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IOException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;KeyManagementException&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;KeyStore&lt;/span&gt; trustStore  &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;KeyStore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;KeyStore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDefaultType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;FileInputStream&lt;/span&gt; instream &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FileInputStream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;my.keystore&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            trustStore&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;instream&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;nopassword&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toCharArray&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;finally&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            instream&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SSLContexts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;custom&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;loadTrustMaterial&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;trustStore&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;The only difference between the two approaches are the way the SSLContext been created.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Gradle, Spring MVC App.]]></title><description><![CDATA[Will try to list down few of my learnings to set up a Spring MVC app with Gradle. And also this time i tried using Servlet 3.0 spec which…]]></description><link>https://prasans.info/skeleton-gradle-spring-mvc-app/</link><guid isPermaLink="false">https://prasans.info/skeleton-gradle-spring-mvc-app/</guid><content:encoded>&lt;p&gt;Will try to list down few of my learnings to set up a Spring MVC app with Gradle. And also this time i tried using Servlet 3.0 spec which means no .xml files for Spring configuration.&lt;/p&gt;
&lt;p&gt;Refer to the &lt;a href=&quot;https://github.com/prasann/GradleSpringApp&quot;&gt;GitHub repo&lt;/a&gt; for the source code. I will be giving some notes on the code.&lt;/p&gt;
&lt;h4&gt;Create build.gradle file&lt;/h4&gt;
&lt;p&gt;build.gradle can be pretty much simple to start with. I started with adding java and war plugin followed by adding dependencies to the Spring artifacts. I have to define&lt;/p&gt;
&lt;p&gt;runtime ‘javax.servlet:jstl:1.2’&lt;/p&gt;
&lt;p&gt;to make sure it doesn’t get packaged as part of the war.&lt;/p&gt;
&lt;p&gt;Then thought it will be awesome to start the application in one command instead of building the war and deploying it in local instance. After some initial searching landed onto this &lt;a href=&quot;https://github.com/bmuschko/gradle-cargo-plugin&quot;&gt;Cargo plugin&lt;/a&gt; This lets you to configure the server of your choice and get it working. So after doing some basic configuration got this working.&lt;/p&gt;
&lt;p&gt;Now&lt;/p&gt;
&lt;p&gt;gradle war cargoRunLocal&lt;/p&gt;
&lt;p&gt;since the task name is not so user friendly, just added an alias to it.&lt;/p&gt;
&lt;p&gt;task serve(dependsOn: cargoRunLocal) &amp;#x3C;&amp;#x3C; {
}
&lt;/p&gt;
&lt;h4&gt;Setup Spring&lt;/h4&gt;
&lt;p&gt;I decided to play around with Servlet 3.0 style of Spring configuration. This means that i do not need to create web.xml or applicationContext.xml files. Instead i can go with complete Java style configuration.&lt;/p&gt;
&lt;p&gt;Application containers (tomcat 7+ in my case) will look for implementation of WebApplicationInitializer and will load that class on the startup. Initializer.java in my src will be equivalent for web.xml&lt;/p&gt;
&lt;p&gt;MvcConfig.java will be equivalent to applicationContext.xml file. This contains all the bean initialization, property place holders and more.&lt;/p&gt;
&lt;p&gt;As you can see most of the configurations are handled by annotations.&lt;/p&gt;
&lt;h4&gt;Setup Unit Tests&lt;/h4&gt;
&lt;p&gt;Setting up Unit tests are no different to Gradle. As i mentioned i have used Java style configuration for my Spring classes. So the style of testing my controllers will also be different.&lt;/p&gt;
&lt;p&gt;InitControllerTest.java will be my controller test. I have initialized a mock web application in the&lt;/p&gt;
&lt;p&gt;@Before&lt;/p&gt;
&lt;p&gt;method and the rest of the stuff are handled by annotations.&lt;/p&gt;
&lt;h4&gt;Setup Logging&lt;/h4&gt;
&lt;p&gt;Setting up slf4j is quite straight forward. You have to add slf4j-log4j, log4j jars and add a log4j.properties to the&lt;/p&gt;
&lt;p&gt;src/main/resources&lt;/p&gt;
&lt;p&gt;In the log4j.properties you can define the way your appenders should work.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Cross Site HTTP(S) Requests.]]></title><description><![CDATA[Browsers have a default security mechanism to prevent http(s) request from one domain to other. Since there are tons of possibilities to…]]></description><link>https://prasans.info/cross-site-http-requests/</link><guid isPermaLink="false">https://prasans.info/cross-site-http-requests/</guid><content:encoded>&lt;p&gt;Browsers have a default security mechanism to prevent http(s) request from one domain to other. Since there are tons of possibilities to misuse them.&lt;/p&gt;
&lt;p&gt;The same origin policy prevents a document or script loaded from one origin from getting or setting properties of a document from another origin. This policy dates all the way back to Netscape Navigator 2.0.&lt;/p&gt;
&lt;p&gt;However there are lots of genuine use cases for this scenario to occur which got to be handled by the application and the browsers.&lt;/p&gt;
&lt;p&gt;I had to face one such genuine case, and got to deal with one of the miserable browser of my time IE :(&lt;/p&gt;
&lt;p&gt;Just documenting few techniques to overcome this problem. I am not elaborating the techniques since that can be figured out, all i wanted is to document the possible solutions and when to use them.&lt;/p&gt;
&lt;h4&gt;1. CORS - Cross Origin Resource sharing&lt;/h4&gt;
&lt;p&gt;A detailed description of how to implement is on this &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS&quot;&gt;Mozilla docs&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This is a very common and an elegant solution that you can find on the net for this problem. All you will need is to add few headers on the application server. This will allow application to allow requests from other application (domain). And also all the response from the parent application will include a header&lt;/p&gt;
&lt;p&gt;Access-Control-Allow-Origin:&lt;/p&gt;
&lt;p&gt;Which will tell the browser to allow those specified domains to talk to the application.&lt;/p&gt;
&lt;p&gt;This solution works well with most of the modern browsers. Check out for the CORS browser support &lt;a href=&quot;http://caniuse.com/cors&quot;&gt;here.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Limitations with IE:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;As you can see the browser compatibility chart, IE8 and IE9 has a partial implementation to CORS.&lt;/p&gt;
&lt;p&gt;Modern browsers could able to support CORS for XMLHttpRequest. However IE8 and IE9 supports CORS using XDomainRequest object. What this means is that they have few limitations of their own.&lt;/p&gt;
&lt;p&gt;Some of the most important constraints are,&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Your requests should be only GET, POST HTTP methods and not PUT, DELETE etc.&lt;/li&gt;
&lt;li&gt;Both the domain (the calling and the caller) uses the same protocol. Either HTTP or HTTPS.&lt;/li&gt;
&lt;li&gt;Your request should not have any custom headers.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The exhaustive list is been detailed out in this &lt;a href=&quot;http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx&quot;&gt;MSDN blog&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Workaround for IE&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;If you think you can live with the constraints mentioned above, then the workaround is quite simple. You got to change all the XHR to XDR to make it work. Luckily if you are using jQuery you don’t need to go through changing all the requests. Instead you can use this &lt;a href=&quot;https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest&quot;&gt;jQuery plugin&lt;/a&gt; . I guess there are more of these available just check out before breaking your brains.&lt;/p&gt;
&lt;h4&gt;2. JSONP Solution&lt;/h4&gt;
&lt;p&gt;Using &lt;a href=&quot;http://json-p.org/&quot;&gt;JSONP&lt;/a&gt; response instead of JSON response.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Advantage:&lt;/strong&gt; No need of any specific workaround for IE8.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Limitation:&lt;/strong&gt; Works only for HTTP(S) GET request. If you are planning to use POST/PUT/DELETE this solution is not for you.&lt;/p&gt;
&lt;h4&gt;3. iFrame Hack.&lt;/h4&gt;
&lt;p&gt;This is a creepy hack. Lets say, if you want to make a call from appA to appB. In appA’s landing page load a hidden iFrame with some URL of appB. Then perform all the requests to appB from that iFrame. Since iFrame’s domain is appB browsers’ will not complain.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Limitation:&lt;/strong&gt; Here the challenge is to consume the response. Your landing page should wait for an even in the iFrame and should consume the iFrame content. Don’t even think of this solution if you want to make more than 1 cross site request in a page.&lt;/p&gt;
&lt;h4&gt;4. Reverse Proxy solution&lt;/h4&gt;
&lt;p&gt;If you want your appA to make a call to appB. Set up a simple reverse proxy to the appA. And use relative paths for the Ajax requests, while the server would be acting as a proxy to any remote location.&lt;/p&gt;
&lt;p&gt;So in appA the relative path of the request will be &lt;em&gt;/cors-ajax&lt;/em&gt;. The browser will not complain since this is not pointing to a different domain. And the reverse proxy rule will redirect anything of &lt;em&gt;cors-ajax&lt;/em&gt; to appB.&lt;/p&gt;
&lt;p&gt;More reference to this implementation:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.askapache.com/htaccess/reverse-proxy-apache.html#Configuring_Proxy&quot;&gt;Configuring the Proxy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/questions/7807600/apache-mod-proxy-configuring-proxypass-proxypassreverse-for-cross-domain-ajax&quot;&gt;Configuring Mod Proxy - SO&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Limitation:&lt;/strong&gt; The server config are quite hard (at least for me) to understand and perform.&lt;/p&gt;
&lt;h4&gt;5. App based solution&lt;/h4&gt;
&lt;p&gt;This solution is very similar to that of the reverse proxy but you don’t need to make any server config changes. The initial CORS approach sounds reasonable, but few limitations like same protocol might stop us from using it. Applications like &lt;a href=&quot;http://anyorigin.com/&quot;&gt;AnyOrigin&lt;/a&gt;, &lt;a href=&quot;http://whateverorigin.org/&quot;&gt;WhateverOrigin&lt;/a&gt; does that for you. They support http and https so you can use the protocol of the main window and consume the response. If you feel unsafe of using a different domain, you can deploy it in your own infrastructure.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Limitation:&lt;/strong&gt; One more app to maintain :(&lt;/p&gt;
&lt;h4&gt;6. Add a generic controller/servlet in your parent domain.&lt;/h4&gt;
&lt;p&gt;Have a controller/servlet in your app which actually does the external domain call. Have only one GET, POST method. Keep posting all your requests to the same end-point with an additional header containing the actual end-point. Inside the method extract the header, make a call and go around about it. This means that browser doesn’t know its an external domain call as your app will serve as a wrapper to that external domain call.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Limitation:&lt;/strong&gt; Multiple HTTP calls for single request/response.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;More on:&lt;/strong&gt; &lt;a href=&quot;http://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy&quot;&gt;How to circumvent same origin policy?&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Re running testNG failed times n times.]]></title><description><![CDATA[We were running our Selenium functional tests using  testNG  runner in  Jenkins . However the problem was we were having too many failures…]]></description><link>https://prasans.info/re-running-testng-failed-tests/</link><guid isPermaLink="false">https://prasans.info/re-running-testng-failed-tests/</guid><content:encoded>&lt;p&gt;We were running our Selenium functional tests using &lt;a href=&quot;http://testng.org/doc/index.html&quot;&gt;testNG&lt;/a&gt; runner in &lt;a href=&quot;http://jenkins-ci.org/&quot;&gt;Jenkins&lt;/a&gt;. However the problem was we were having too many failures on our initial run, and lot of these failures were classified as random or not reproducable. Mainly these are test script issues. Some times the testers tend to put some static wait conditions which might work on their machine but not in the Jenkins agent. Sometimes the environment against which our tests run might be a bit slow which pushes our pass percentage well behind. The ideal appropriate fix will be is to go through the failed test cases and figure out the randomness and fix it. But we thought of adding a re run mechanism to our test job to identify these random failures. As the no. of test cases grew, we ended up in re running the failed tests multiple times, something like this.&lt;/p&gt;
&lt;p&gt;Name&lt;/p&gt;
&lt;p&gt;Total&lt;/p&gt;
&lt;p&gt;Failed&lt;/p&gt;
&lt;p&gt;Initial run&lt;/p&gt;
&lt;p&gt;100&lt;/p&gt;
&lt;p&gt;30&lt;/p&gt;
&lt;p&gt;ReRun1&lt;/p&gt;
&lt;p&gt;30&lt;/p&gt;
&lt;p&gt;20&lt;/p&gt;
&lt;p&gt;ReRun2&lt;/p&gt;
&lt;p&gt;20&lt;/p&gt;
&lt;p&gt;10&lt;/p&gt;
&lt;p&gt;In this case we will interpret the last 10 failures as a legitimate failures and rest as intermittent ones. &lt;/p&gt;
&lt;p&gt;Please note that this is not a correct approach to reduce the failure count. This make the testers more lazy since they always analyse only the failed tests in the final run. And this increases the running time of the job inadvertently since the sure fail cases runs for n times and failing always.&lt;/p&gt;
&lt;h3&gt;Re Running testNG failed tests using ANT&lt;/h3&gt;
&lt;p&gt;After every test run, testng will create a file called testng-failed.xml in the report directory which will contain the failed tests of that run. There was an issue with this file however. If you define multiple suites in your initial test suite file then this outer testng-failed.xml will contain the failed tests of the first run alone. The remaining suite’s failed tests will be in the inner directories under their corresponding suite names.&lt;/p&gt;
&lt;p&gt;This testng-failed.xml will also inherit all the properties from the original test suite file. For example if we have defined thread-count value then the same value will be retained.&lt;/p&gt;
&lt;p&gt;So what I did was copied this file to a location and fed this to the testng task to run again. This can be achieved by any means, since we were using ant as our build tool i configured this in our build.xml file itself.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;target name=&amp;quot;runTests&amp;quot; depends=&amp;quot;compile&amp;quot; description=&amp;quot;Running tests&amp;quot;&amp;gt;
	&amp;lt;echo&amp;gt;Running Tests...&amp;lt;/echo&amp;gt;
	&amp;lt;taskdef resource=&amp;quot;testngtasks&amp;quot; classpath=&amp;quot;lib/testng-6.8.jar&amp;quot; /&amp;gt;
	&amp;lt;testng outputDir=&amp;quot;${report.dir}&amp;quot; useDefaultListeners=&amp;quot;true&amp;quot; classpathref=&amp;quot;build.classpath&amp;quot; 
		listeners=&amp;quot;org.uncommons.reportng.HTMLReporter,org.uncommons.reportng.JUnitXMLReporter&amp;quot;&amp;gt;
		&amp;lt;classpath location=&amp;quot;${class.dir}&amp;quot; /&amp;gt;
		&amp;lt;xmlfileset dir=&amp;quot;.&amp;quot; includes=&amp;quot;testng-suite.xml&amp;quot; /&amp;gt;
		&amp;lt;sysproperty key=&amp;quot;org.uncommons.reportng.title&amp;quot; value=&amp;quot; Test report&amp;quot; /&amp;gt;
		&amp;lt;sysproperty key=&amp;quot;properties&amp;quot; value=&amp;quot;${properties}&amp;quot; /&amp;gt;
	&amp;lt;/testng&amp;gt;
	&amp;lt;copy file=&amp;quot;${report.dir}/testng-failed.xml&amp;quot; todir=&amp;quot;${basedir}/test-output-rerun/0&amp;quot;/&amp;gt;
	
	&amp;lt;antcall target=&amp;quot;multiReRun&amp;quot;/&amp;gt;
&amp;lt;/target&amp;gt;
&amp;lt;target name=&amp;quot;multiReRun&amp;quot; description=&amp;quot;Multiple rerun tests&amp;quot;&amp;gt;
	&amp;lt;antcall target=&amp;quot;runFailedTests&amp;quot;&amp;gt;
		&amp;lt;param name=&amp;quot;rerun.report.dir&amp;quot; value=&amp;quot;${rerun.base.dir}/1&amp;quot;/&amp;gt;
		&amp;lt;param name=&amp;quot;src.rerun.dir&amp;quot; value=&amp;quot;${rerun.base.dir}/0&amp;quot;/&amp;gt;
	&amp;lt;/antcall&amp;gt;
	&amp;lt;antcall target=&amp;quot;runFailedTests&amp;quot;&amp;gt;
		&amp;lt;param name=&amp;quot;rerun.report.dir&amp;quot; value=&amp;quot;${rerun.base.dir}/2&amp;quot;/&amp;gt;
		&amp;lt;param name=&amp;quot;src.rerun.dir&amp;quot; value=&amp;quot;${rerun.base.dir}/1&amp;quot;/&amp;gt;
	&amp;lt;/antcall&amp;gt;
&amp;lt;/target&amp;gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;Here output folder of the init run will be test-output. And am copying testng-failed.xml from test-output to test-output-rerun/0 . This is just to make my multiReRun more convenient. Now i have repeated the block of code for two times. This is due to the fact that ant doesn’t support the regular for..counter loop.&lt;/p&gt;
&lt;p&gt;When i went through some ant docs figured out that ant script supports JavaScript!! May be i can use that to constuct a string like “1,2,3,4,5” and pass it onto the for loop of ant.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Wiring Jasmine 2.0 with Phantom JS]]></title><description><![CDATA[Briefed out the steps that i did to run my Jasmine test suite in my CI. Download phantomjs.exe (Our CI server was running in a Windows…]]></description><link>https://prasans.info/wiring-jasmine2-with-phantom/</link><guid isPermaLink="false">https://prasans.info/wiring-jasmine2-with-phantom/</guid><content:encoded>&lt;p&gt;Briefed out the steps that i did to run my Jasmine test suite in my CI.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Download phantomjs.exe (Our CI server was running in a Windows server). &lt;a href=&quot;http://phantomjs.org/download.html&quot;&gt;Download link&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Use &lt;a href=&quot;https://gist.github.com/prasann/9972777&quot;&gt;run-jasmine.js&lt;/a&gt;. This runner code is taken from phantomJS example and modified to run Jasmine 2.0 and to format the output as we needed.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Assuming phantomjs.exe, run-jasmine.js and SpecRunner.html (Specrunner file) are in the same level in a directory, execute this command&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;phantomjs.exe run-jasmine.js SpecRunner.html \[--debug\]&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The —debug is optional. If run on the debug mode it will print the stack trace of the failed specs and also prints all the specs that are been executed.&lt;/p&gt;
&lt;p&gt;SpecRunner.html is very similar to the one that comes along with Jasmine 2.0 samples. The SpecRunner.html that comes with Jasmine 1.3 will not work, as the way of booting Jasmine is changed in the latest version. The only changes I made to the SpecRunner.html is to modify my src and spec file locations.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[UTC time in Android device. With NTP server sync.]]></title><description><![CDATA[I had a requirement to persist the current UTC time of a request in Android device for future reference. Getting the time from the Android…]]></description><link>https://prasans.info/utc-time-android-device-ntp-server-sync/</link><guid isPermaLink="false">https://prasans.info/utc-time-android-device-ntp-server-sync/</guid><content:encoded>&lt;p&gt;I had a requirement to persist the current UTC time of a request in Android device for future reference.&lt;/p&gt;
&lt;p&gt;Getting the time from the Android device and converting it to UTC will not be efficient since, user might have set wrong time in the device and it might mislead the data.&lt;br&gt;
So we decided to sync the device with NTP server before converting the time to UTC.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Step 1 :&lt;/strong&gt; Copy this &lt;a href=&quot;https://gist.github.com/prasann/9003350&quot; title=&quot;SntpClient.java&quot;&gt;SntpClient.java&lt;/a&gt; into your source.&lt;br&gt;
&lt;strong&gt;Step 2 :&lt;/strong&gt; The SntpService.java to compute the current UTC is here below.&lt;/p&gt;
&lt;p&gt;public String getUTCTime(){
long nowAsPerDeviceTimeZone = 0;
SntpClient sntpClient = new SntpClient();&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    if (sntpClient.requestTime(&amp;quot;0.africa.pool.ntp.org&amp;quot;, 30000)) {
        nowAsPerDeviceTimeZone = sntpClient.getNtpTime();
        Calendar cal = Calendar.getInstance();
        TimeZone timeZoneInDevice = cal.getTimeZone();
        int differentialOfTimeZones = timeZoneInDevice.getOffset(System.currentTimeMillis());
        nowAsPerDeviceTimeZone -= differentialOfTimeZones;
    }
    return DateUtils.getFormattedDateTime(new Date(nowAsPerDeviceTimeZone));
}&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;Some more details on SntpService code:&lt;/p&gt;
&lt;p&gt;Connect to any of the prominent ntp servers. There were lots of recommendation to place this in config file, however i thought it doesn’t make sense for Android since i have to repackage this anyways.&lt;/p&gt;
&lt;p&gt;sntpClient.getNtpTime()&lt;/p&gt;
&lt;p&gt;gives you the current NTP time as per the device time zone.&lt;/p&gt;
&lt;p&gt;Then identify the device’s time zone,&lt;/p&gt;
&lt;p&gt;cal.getTimeZone()&lt;/p&gt;
&lt;p&gt;and calculate the offset difference between UTC and the current device time.&lt;/p&gt;
&lt;p&gt;DateUtils.getFormattedDateTime(date)&lt;/p&gt;
&lt;p&gt;is our custom method to format date into String.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Hike to Castle Gorge with JHC]]></title><description><![CDATA[As part of  Johannesburg Hiking Club  i went to Castle Gorge on 10th Nov 2013. This was my first hiking experience in Johannesburg and also…]]></description><link>https://prasans.info/castle-gorge-hiking-with-jhc/</link><guid isPermaLink="false">https://prasans.info/castle-gorge-hiking-with-jhc/</guid><content:encoded>&lt;p&gt;As part of &lt;a href=&quot;http://www.jhbhiking.co.za/main/&quot;&gt;Johannesburg Hiking Club&lt;/a&gt; i went to Castle Gorge on 10th Nov 2013. This was my first hiking experience in Johannesburg and also its been quite some time i did any kind of hiking. So wasn’t sure whether my body would cope up or not.&lt;/p&gt;
&lt;h3&gt;Hiking Preparation&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;3 litres of water&lt;/strong&gt; is minimum. The day we went was quite hot and needed lot more. However there were couple of places to refill while coming back so that saved me. But to reach these refill spots you have to hike at least 4-5 hours. So better be on safe side.&lt;/li&gt;
&lt;li&gt;Pack a light &lt;strong&gt;food for lunch.&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;1 or 2 &lt;strong&gt;apples&lt;/strong&gt; for breaks.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Sun screen.&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Salt + lemon&lt;/strong&gt; (Just in case). Hiking causes excessive sweating and body tends to loose lot of salt.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;A towel.&lt;/strong&gt; There was a nice pool of water where we had a lunch, so if you feel tired you can get a bath over there.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;The Beginning&lt;/h3&gt;
&lt;p&gt;I was up by 6.00AM was all excited for the day. The plan is to Ruimin Zhang will pick me up by my place and we leave Melrose around 6.45AM to our first halt.&lt;/p&gt;
&lt;h3&gt;First Halt&lt;/h3&gt;
&lt;p&gt;Our first halt was at Gateview House, &lt;a href=&quot;http://goo.gl/2xOzFS&quot;&gt;Constantia Park&lt;/a&gt;. And we are supposed to assemble and register for the hike by 7.45AM. We reached there around 7.30 AM and saw lot of people registering for the hike. The registration was 40Rands and we have to sign up for the hike with an organiser.I was surprised as people were punctual and by 7.45AM the organiser closed off the registration and asked everyone to get ready for the drive to Castle Gorge.&lt;/p&gt;
&lt;p&gt;Lots of people left their cars in the parking and car pooled with others. Felt this was a great idea, since if you are tired after the hike you don’t need to drive. And also saves fuel. We dropped our car too and get along with few Chinese friends in their car around 8.00 AM.&lt;/p&gt;
&lt;h3&gt;Arriving at Castle Gorge&lt;/h3&gt;
&lt;p&gt;The driving time was around 1 hour from Gateview house. Except the last 4-5 kms in the dirt road the rest of the drive was quite smooth. JHC have their own assembly point near the hiking spot, so everyone got there and prepared ourselves for the hike. Then the organiser introduced leaders for different levels and explained what these levels are. There were three levels of difficulty in the hike with Level 1 being the easiest.&lt;/p&gt;
&lt;h3&gt;The hike&lt;/h3&gt;
&lt;p&gt;Me, Ruimin along with his friends chose to go on with Level 2. We were led by Christa Medri. Believe me she was 57 years old !!!&lt;/p&gt;
&lt;p&gt;The hike started quite energetically, through a mud road leading to the hills. The road extended for 2Kms. And it was slightly a uphill slope. Got to push through ourselves to catch up the leader. We parted the Level 1 folks as they decided to take an early break. An other level folks settled down for a break after 30-45 mins in a nice place with beautiful landscape. Level 3 folks were quick and they started to move on within 2-3 mins. But we decided to have a healthy 10 min break.&lt;/p&gt;
&lt;p&gt;Our leader explained us how the route will be and was telling why its important to follow the team. I felt the sense of real hike after this break, since i could see some rocks and narrow paths ahead of us. But it was quite easy than it looked. Still we could see the path and people were introducing themselves as there were quite a lot of talking all the way. After another 40 mins we settled down for an apple break near a dirt pool. Its not exactly a pool but just some dirt water, but during rainy season i guess it will have lot more of water. There was lots of rocks so people settled down for their first snack break.&lt;/p&gt;
&lt;p&gt;After a good 20 min the team started to move on. Then after sometime i could see a long barren land that we have to walk through. It would be easily 2 Kms of straight walk. After that, its time for some hike through hills. Narrow paths over the rocks, trees made it interesting. Everyone was exploring some safe route and also kept eye on the leader. I thoroughly enjoyed this 30 min hike as finally we had good shade and the climbing stuff made it interesting.&lt;/p&gt;
&lt;p&gt;After the tiring 3 hours of hike we then reached an awesome waterfall and cold pool of water. There we decided to break up for lunch. The water was really cold and everyone took a dip in the cold pool to refresh themselves And after good 30-45 minutes we decided to head back.&lt;/p&gt;
&lt;p&gt;Suddenly it became cloudy and the quick dip in water made us super energetic to move on. The return route was more tedious, we decided to take a look into couple of big water falls on the way back. So got to do some hard work of climbing rocks to reach the falls. However the moment we reached the falls, it started to drizzle so we didn’t go near the water. And after another 15 min of hard climb we reached a small spring waters. I was so excited to see that since all my bottles were empty by then. After an adventurous water filling activity :) the team decided to move on.&lt;/p&gt;
&lt;p&gt;From then on for another 1 hour it was a straight walk to reach the mud road. This walk was damn boring after some exciting stuff. However we got to make it to the parking quickly so this looked like a better option. There was nothing interesting in this stretch apart from relentless chatting of fellow hikers. And there we finally reached the mud road and saw the Level 1 folks resting. Me and my friend was so very excited about nearing the finish line, so we started run but wasn’t easy though. Have to run for next 10-15 min to reach the parking. I was half dead when i reached there. But i don’t want to drive back all the way this made me so happy. Said good bye to all the fellow hikers and thanked the leader for a safe trip back and left the place.&lt;/p&gt;
&lt;p&gt;After another 1.5 hours of drive reached back home and was totally exhausted. Decided to catch up some sleep and to get ready for the next day to Office.&lt;/p&gt;
&lt;p&gt; &lt;a href=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/full/1_begining_mud_road.jpg&quot; title=&quot;Mud Road from Car Park&quot;&gt;&lt;img src=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/thumbs/1_begining_mud_road.jpg&quot; alt=&quot;Mud Road from Car Park&quot;&gt;&lt;/a&gt; &lt;a href=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/full/2_castle_gorge_name_board.jpg&quot; title=&quot;Start of the Trek&quot;&gt; &lt;img src=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/thumbs/2_castle_gorge_name_board.jpg&quot; alt=&quot;Start of the Trek&quot;&gt; &lt;/a&gt; &lt;a href=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/full/3_pebble_road.jpg&quot; title=&quot;Pebble path to start with!&quot;&gt; &lt;img src=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/thumbs/3_pebble_road.jpg&quot; alt=&quot;Pebble path to start with!&quot;&gt; &lt;/a&gt; &lt;a href=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/full/4_first_rest_point.jpg&quot; title=&quot;First rest point&quot;&gt; &lt;img src=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/thumbs/4_first_rest_point.jpg&quot; alt=&quot;First rest point&quot;&gt; &lt;/a&gt; &lt;a href=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/full/5_on_the_way_up_rocks.jpg&quot; title=&quot;Up the rocks&quot;&gt; &lt;img src=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/thumbs/5_on_the_way_up_rocks.jpg&quot; alt=&quot;Up the rocks&quot;&gt; &lt;/a&gt; &lt;a href=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/full/6_dirt_pond_for_rest.jpg&quot; title=&quot;Settled down for Snack break&quot;&gt; &lt;img src=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/thumbs/6_dirt_pond_for_rest.jpg&quot; alt=&quot;Settled down for Snack break&quot;&gt; &lt;/a&gt; &lt;a href=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/full/7_plain_barren_land.jpg&quot; title=&quot;Walk across barren land&quot;&gt; &lt;img src=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/thumbs/7_plain_barren_land.jpg&quot; alt=&quot;Walk across barren land&quot;&gt; &lt;/a&gt; &lt;a href=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/full/8_crossing_the_fence.jpg&quot; title=&quot;Crossing the fence&quot;&gt; &lt;img src=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/thumbs/8_crossing_the_fence.jpg&quot; alt=&quot;Crossing the fence&quot;&gt; &lt;/a&gt; &lt;a href=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/full/9_lunch_point.jpg&quot; title=&quot;Awesome place to rest by&quot;&gt; &lt;img src=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/thumbs/9_lunch_point.jpg&quot; alt=&quot;Awesome place to rest by&quot;&gt; &lt;/a&gt; &lt;a href=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/full/10_lunch_point.jpg&quot; title=&quot;Its Lunch time here&quot;&gt; &lt;img src=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/thumbs/10_lunch_point.jpg&quot; alt=&quot;Its Lunch time here&quot;&gt; &lt;/a&gt; &lt;a href=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/full/13_uphill_task.jpg&quot; title=&quot;Uphill Task&quot;&gt; &lt;img src=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/thumbs/13_uphill_task.jpg&quot; alt=&quot;Uphill Task&quot;&gt; &lt;/a&gt; &lt;a href=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/full/11_waterfalls_while_coming_back.jpg&quot; title=&quot;Waterfall on the way back&quot;&gt; &lt;img src=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/thumbs/11_waterfalls_while_coming_back.jpg&quot; alt=&quot;Waterfall on the way back&quot;&gt; &lt;/a&gt; &lt;a href=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/full/12_spring_waters.jpg&quot; title=&quot;Spring waters&quot;&gt; &lt;img src=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/thumbs/12_spring_waters.jpg&quot; alt=&quot;Spring waters&quot;&gt; &lt;/a&gt; &lt;a href=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/full/14_rocks_on_our_Way.jpg&quot; title=&quot;Way back&quot;&gt; &lt;img src=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/thumbs/14_rocks_on_our_Way.jpg&quot; alt=&quot;Way back&quot;&gt; &lt;/a&gt; &lt;a href=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/full/15_loong_way_back.jpg&quot; title=&quot;Boooring walk&quot;&gt; &lt;img src=&quot;/assets/images/posts/castle-gorge-hiking-with-jhc/thumbs/15_loong_way_back.jpg&quot; alt=&quot;Boooring walk&quot;&gt; &lt;/a&gt; [![Way back](/assets/images/posts/castle-gorge-hiking-with-jhc/thumbs/16&lt;em&gt;rocks&lt;/em&gt;on&lt;em&gt;the way&lt;/em&gt;back.jpg)](/assets/images/posts/castle-gorge-hiking-with-jhc/full/16&lt;em&gt;rocks&lt;/em&gt;on&lt;em&gt;the way&lt;/em&gt;back.jpg “Way back”)&lt;/p&gt;</content:encoded></item><item><title><![CDATA[What's new in Apple Passbook iOS7]]></title><description><![CDATA[I’m currently working in a project that integrated with iOS Passbook application to deliver digital passes to their users. Spent some time…]]></description><link>https://prasans.info/whats-new-in-apple-passbook-ios7/</link><guid isPermaLink="false">https://prasans.info/whats-new-in-apple-passbook-ios7/</guid><content:encoded>&lt;p&gt;I’m currently working in a project that integrated with iOS Passbook application to deliver digital passes to their users. Spent some time in investigating the changes to passbook application in iOS7 (beta 4). Here is a quick summary of it.&lt;/p&gt;
&lt;p&gt;Apple listened to its user’s feedback and have come with some features which increases the usability of the application.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Add multiple passes to Passbook.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Yes, you can able to add multiple passes to the Passbook application in one go. So, if you are issuing multiple passes to your users, probably have a page with all the passes and you can have download all link, which downloads all the passes in one shot.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Delivery through Barcode.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Apple have added one more delivery mechanism to the passbook. Currently you can deliver a pass through Safari browser (with vnd.apple.pkpass as header) or Through email attachment or to stream from your native iOS application. Now in the new passbook app they have added a barcode scanner. So the content of the pass can be crisped into a barcode and can be delivered to the Passbook application.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Anchor tags at the back of the pass.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Currently you can have links, but you cannot have link text. For example if you want to link &lt;a href=&quot;http://google.com&quot;&gt;http://www.google.com&lt;/a&gt; to ‘Click here’ it is not possible. But it will be possible from iOS7&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Expiration date for Passes.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Now passes can have its own expiration date. It’s a meta data that you can set and after that the passes will be destroyed from the Apple passbook automatically.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Usage restriction by Geo location.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;You can restrict the usage of passes, within a specific geo location. For example if you are issuing a coupon, then you can make sure that your users could able to access the coupons within a specific geo co-ordinates.&lt;/p&gt;
&lt;p&gt;All these are nice features that are provided in iOS7. So far i was happy with all these news, until i read that, (&lt;a href=&quot;https://devforums.apple.com/thread/190987?tstart=0&quot;&gt;Dev forum link&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The rendering algorithms are significantly different from the previous versions.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;This seems to be a major issue to me, since i have to now test the appearance of my pass with new version. And have to think about optimising the design across all the versions.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Setting up Cucumber-jvm]]></title><description><![CDATA[Cucumber JVM  is Java implementation of Cucumber BDD. Integrating into the Project The installation using maven is super simple, just add…]]></description><link>https://prasans.info/setting-up-cucumber-jvm/</link><guid isPermaLink="false">https://prasans.info/setting-up-cucumber-jvm/</guid><content:encoded>&lt;p&gt;&lt;a href=&quot;https://github.com/cucumber/cucumber-jvm&quot; title=&quot;Cucumber JVM&quot;&gt;Cucumber JVM&lt;/a&gt; is Java implementation of Cucumber BDD.&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;Integrating into the Project&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;The installation using maven is super simple, just add the dependency and you are ready to go. Make sure you add both command line interface (cucumber-core) and the IDE interface (cucumber-junit)&lt;/p&gt;
&lt;p&gt;I was using Intellij and add Intellij Cucumber plugin, to make the navigations easier.&lt;/p&gt;
&lt;p&gt;One thing i liked very much is the ability to add custom annotations to the feature. You can add a custom annotation and can create Before and After hook for them.&lt;/p&gt;
&lt;p&gt;In .feature file&lt;/p&gt;
&lt;p&gt;@Email
Feature:&lt;/p&gt;
&lt;p&gt;In the step definitions file.&lt;/p&gt;
&lt;p&gt;@Before({“@Email”})
@After({“@Email”})&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;Integrating with Spring&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;For Spring integration you need to add one more component of the cucumber-jvm &lt;em&gt;(cucumber-spring)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;It is advisable to have a test runner class which can run all the feature files in one go especially when you are runnning in the CI.&lt;/p&gt;
&lt;p&gt;The structure of the test runner class will be :&lt;/p&gt;
&lt;p&gt;@RunWith(Cucumber.class)
public class CucumberAdapterTest {
}&lt;/p&gt;
&lt;p&gt;Make sure to place all the feature files in the same package as of this Runner class. Or you can specify the path using the cucumber options, like this.&lt;/p&gt;
&lt;p&gt;@RunWith(Cucumber.class)
@Cucumber.Options(features = “classpath:**/*.feature”)
public class CucumberAdapterTest {
}&lt;/p&gt;
&lt;p&gt;If you are placing all the step definition in other package you can add that to the annotation using glue attribute.&lt;/p&gt;
&lt;p&gt;@RunWith(Cucumber.class)
@Cucumber.Options(features = “classpath:**/*”, glue = {“path of the step definitions”})
public class CucumberAdapterTest {
}&lt;/p&gt;
&lt;p&gt;This will look up for cucumber.xml file in the classpath. This xml file can hold all the bean definitions. My cucumber.xml was super simple.&lt;/p&gt;
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;p&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
	http://www.springframework.org/schema/context 
	http://www.springframework.org/schema/context/spring-context-3.0.xsd&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;import resource=&amp;quot;classpath\*:/application-context.xml&amp;quot;/&amp;gt;

&amp;lt;context:component-scan base-package=&amp;quot;path of the step definition&amp;quot;/&amp;gt;
&amp;lt;context:annotation-config/&amp;gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;/beans&gt;
&lt;p&gt;The step defnitions can lie in a different package and make sure you use glue attribute to wire them in the Runner class.&lt;/p&gt;
&lt;p&gt;public class StepDefinitions {
@Autowired
EntityRepository entityRepository;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;@Given(&amp;quot;^Register a user$&amp;quot;)
public void registerUser() throws Throwable {

}&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;}&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;Integrating with Spring Transactions&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;One last thing that i wanted to do is to hook up Spring transactions. So all the data created by the features have to be removed after the test completes. So you can write independent tests without bothering about the data.&lt;/p&gt;
&lt;p&gt;You can use ’&lt;em&gt;txn&lt;/em&gt;’ annotation that comes with Cucumber-JVM. All you need to do is to wire up that package along with your adapter class.&lt;/p&gt;
&lt;p&gt;@RunWith(Cucumber.class)
@Cucumber.Options(glue = {“cucumber.api.spring”})
public class CucumberAdapterTest {
}&lt;/p&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;p&gt;@txn
Scenario: Some scenario to test&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Link your Sublime Text 2 instances with Dropbox]]></title><description><![CDATA[After started using  Sublime Text 2 (ST2) , was completely head over heels for it. After using it for some time, figured out that ST2 uses a…]]></description><link>https://prasans.info/link-your-sublime-text-2-instances-with-dropbox/</link><guid isPermaLink="false">https://prasans.info/link-your-sublime-text-2-instances-with-dropbox/</guid><content:encoded>&lt;p&gt;After started using &lt;strong&gt;Sublime Text 2 (ST2)&lt;/strong&gt;, was completely head over heels for it. After using it for some time, figured out that ST2 uses a settings file to remember the plugins, open tabs etc. I was using my laptop (Mac) and sometimes uses my PC (Windows) do type blog post or some other stuff. So thought of giving a try in syncing these two using Dropbox folder.&lt;/p&gt;
&lt;p&gt;The idea is to have the settings file in the Dropbox folder and to have a symlink in the OS to point to. This means whatever changes i did to a ST2 instance will reflect in my other instance too.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Prerequisites:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Install ST2 in both the machines.&lt;/li&gt;
&lt;li&gt;Have a DropBox account and install the software in both the machines.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;strong&gt;In Mac:&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Move the entire Sublime Text folder into the Dropbox folder.&lt;/p&gt;
&lt;p&gt;mv ’~/Library/Application\ Support/Sublime\ Text\ 2/’ ’~/Dropbox/Sublime\ Text\ 2’&lt;/p&gt;
&lt;p&gt;Next step is to create a symlink in the original location so that it the folder in the Dropbox will be used to store the settings.&lt;/p&gt;
&lt;p&gt;ln -s ’~/Library/Application\ Support/Sublime\ Text\ 2’ ’~/Dropbox/Sublime\ Text\ 2’&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;In Windows:&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Windows don’t have symlink concept. So we have to settle with &lt;a href=&quot;http://en.wikipedia.org/wiki/NTFS_symbolic_link&quot; title=&quot;NTFS Junction Point&quot;&gt;NTFS symbolic link&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;mklink /J ‘C:/Users/user_name/Dropbox/Sublime Text 2’ ‘C:/User/user_name/Applications/Sublime Text 2’&lt;/p&gt;
&lt;p&gt;That’s it, now you don’t need to worry about the sync between these two instances.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Scribblings on Socket.io]]></title><description><![CDATA[I was trying my hands on socket.io. On my first glance it looked extremely simple to get going. The app i was working was on node.js, so i…]]></description><link>https://prasans.info/scribblings-socket-io/</link><guid isPermaLink="false">https://prasans.info/scribblings-socket-io/</guid><content:encoded>&lt;p&gt;I was trying my hands on socket.io. On my first glance it looked extremely simple to get going. The app i was working was on node.js, so i had no trouble in including socket.io into my project.&lt;/p&gt;
&lt;p&gt;My app had client and server component. For the server component i could able to do the npm install and got the socket.io working. Whereas for the client component i couldn’t able to find the stand alone js available for download. Basically the js comes in along with the npm which means you got to take it out separately if you want to use it. Then i used the js file from their &lt;a href=&quot;https://github.com/learnboost/socket.io&quot;&gt;Github repo&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;By default Socket.io doesn’t perform broadcast&lt;/h2&gt;
&lt;p&gt;This is my first learning. Though it seems to be obvious after taking a good look onto the API, it wasn’t very clear for me in the beginning.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;For example:&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Server&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;var app = require(‘express’)(),
server = require(‘http’).createServer(app),
io = require(‘socket.io’).listen(server);&lt;/p&gt;
&lt;p&gt;server.listen(80);&lt;/p&gt;
&lt;p&gt;io.sockets.on(‘connection’, function(socket) {
socket.on(‘first_msg’, function(data) {
socket.emit(‘reply’, {
hello: ‘world’
});
});
});&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Client 1:&lt;/strong&gt;&lt;/p&gt;
&lt;script src = &quot;/socket.io/socket.io.js&quot; &gt; &lt;/script&gt;
&lt;script&gt;
	var socket = io.connect(&apos;http:/ / localhost &apos;);
	socket.emit(&apos;first\_msg &apos;, { my: &apos;data1 &apos; });
&lt;/script&gt;
&lt;p&gt;&lt;strong&gt;Client 2:&lt;/strong&gt;&lt;/p&gt;
&lt;script src = &quot;/socket.io/socket.io.js&quot; &gt; &lt;/script&gt;
&lt;script&gt;
	var socket = io.connect(&apos;http:/ / localhost &apos;);
	socket.on(&apos;reply &apos;, function (data){
		console.log(&quot;Client1 had pinged server.&quot;);
	}
&lt;/script&gt;
&lt;p&gt;In this case i was expecting my &lt;em&gt;Client2&lt;/em&gt; console.log to execute but that never happened. Reason being whenever &lt;em&gt;Client1&lt;/em&gt; emits ’&lt;em&gt;first\&lt;/em&gt;msg&lt;em&gt;’ it was _Client1&lt;/em&gt; who was receiving the reply too (obvious i know !!).&lt;/p&gt;
&lt;p&gt;So in these cases socket.io provides an API to broadcast messages.Hence instead of&lt;/p&gt;
&lt;p&gt;socket.emit(‘reply’, { hello: ‘world’ });&lt;/p&gt;
&lt;p&gt;it should have been&lt;/p&gt;
&lt;p&gt;socket.broadcast.emit(‘reply’, { hello: ‘world’ });&lt;/p&gt;
&lt;h2&gt;Exposed events in socketIO are just defined for socket.on methods&lt;/h2&gt;
&lt;p&gt;I was trying to emit a custom message from my client. I need to perform some actions on its success and failure. Now i need to attach success and error callbacks. For this i found this &lt;a href=&quot;https://github.com/LearnBoost/socket.io/wiki/Exposed-events&quot; title=&quot;Exposed Events&quot;&gt;Exposed events&lt;/a&gt; doc. The funda is that all these exposed events are defined only for socket.on which means while emitting a message i cannot bind any callbacks to it.&lt;/p&gt;
&lt;p&gt;For error callback it is straight forward. We have&lt;/p&gt;
&lt;p&gt;socket.on(‘error’, () -&gt; console.log(“Error Occured”))&lt;/p&gt;
&lt;p&gt;which can be bound on the socket so whenever an error is been thrown on the socket the defined behaviour gets executed.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Client&lt;/strong&gt; emits the custom message and sends JSON data to the socket via socket.emit, also he gets an update function that handles the success callback&lt;/p&gt;
&lt;p&gt;socket.emit (‘message’, {hello: ‘world’});
socket.on (‘messageSuccess’, function (data) {
//do something
});&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Server&lt;/strong&gt;-side Gets a call from the message emit from the client and emits the messageSuccess back to the client&lt;/p&gt;
&lt;p&gt;socket.on (‘message’, function (data) {
io.sockets.emit (‘messageSuccess’, data);
});&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Hamcrest conflict in jUnit.]]></title><description><![CDATA[Using jUnit 4.8 i got into an issue when testing the few  lambda  expressions. I was constantly getting this error while testing code…]]></description><link>https://prasans.info/hamcrest-conflict-junit/</link><guid isPermaLink="false">https://prasans.info/hamcrest-conflict-junit/</guid><content:encoded>&lt;p&gt;Using jUnit 4.8 i got into an issue when testing the few &lt;a href=&quot;http://code.google.com/p/lambdaj/&quot; title=&quot;LambdaJ&quot;&gt;lambda&lt;/a&gt; expressions. I was constantly getting this error while testing code involving Hamcrest matchers.&lt;/p&gt;
&lt;p&gt;java.lang.NoSuchMethodError: org.hamcrest.core.AllOf.allOf(Lorg/hamcrest/Matcher;Lorg/hamcrest/Matcher;)Lorg/hamcrest/Matcher;&lt;/p&gt;
&lt;p&gt;However when i ran the application it was all fine. So i could sense the issue with the jUnit.&lt;/p&gt;
&lt;p&gt;The problem is due to hamcrest versioning issue with jUnit. jUnit uses an old version while other libraries (in my case LambdaJ) was using the latest version. The fix will be to download the junit-dep-4.*.jar from the jUnit &lt;a href=&quot;https://github.com/KentBeck/junit/downloads&quot; title=&quot;gitHub kent beck&quot;&gt;download&lt;/a&gt; page. Since you app already have Hamcrest class the test will run smoothly.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Handle MaxUpload SizeExceededException in Spring]]></title><description><![CDATA[I was doing a AJAX file upload using jQuery and Spring 3. Spring provides a way to limit the file being uploaded and this can be configured…]]></description><link>https://prasans.info/handle-maxuploadsizeexceededexception-spring/</link><guid isPermaLink="false">https://prasans.info/handle-maxuploadsizeexceededexception-spring/</guid><content:encoded>&lt;p&gt;I was doing a AJAX file upload using jQuery and Spring 3. Spring provides a way to limit the file being uploaded and this can be configured while creating the multipart bean by specifying the maxUploadSize parameter.&lt;/p&gt;
&lt;p&gt;So whenever an user tries to upload a file with size size greater than that of the specified one then Spring will throw &lt;em&gt;‘MaxUploadSizeExceededException’&lt;/em&gt; exception and returns back. The problem for me is that i was doing the file upload using AJAX so i wanted a custom error to be thrown rather than the Spring’s default error.&lt;/p&gt;
&lt;p&gt;And also because of this exception the control will not even reach your specified controller so there is no chance to catch it in your Controller. After some lookup i found this simple fix for it.&lt;/p&gt;
&lt;p&gt;FileUploadController: Controller which will handle the file upload request.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Make this FileUploadController to implement HandlerExceptionResolver. This will force you to define resolveException() method.&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;  @ResponseBody
public ModelAndView resolveException(HttpServletRequest httpServletRequest,
HttpServletResponse httpServletResponse, Object o, Exception e) {
if (e instanceof MaxUploadSizeExceededException) {
ModelAndView modelAndView = new ModelAndView(“inline-error”);
modelAndView.addObject(“error”, “Error: Your file size is too large to upload.
Please upload a file of size &amp;#x3C; 5MB and continue.”);
return modelAndView;
}
e.printStackTrace();
return new ModelAndView(“500”);
}&lt;/p&gt;
&lt;p&gt;** How to show the error on the same page:**&lt;/p&gt;
&lt;p&gt;The call to the controller is from a jQuery ajax method. But the problem here is that even with this approach your jQuery POST method is going to receive a HTTP_OK message from the controller. Hence if you are waiting at the error callback then you have no chance of catching this error.&lt;/p&gt;
&lt;p&gt;So what i have done here is to return inline-error view back as the response. On the success callback of the jQuery i check for the presence of the error_div in the response and display the field in the page. Else show the success message.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;inline-error.jsp&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;error&quot; id=&quot;error\_div&quot;&gt;${error}&lt;/div&gt;
&lt;p&gt;&lt;em&gt;PS: This is definitely not the cleanest approach, but this solved my problem :)&lt;/em&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Make your NTFS drive writable under Mac Lion]]></title><description><![CDATA[Just now i got my new MBP pre loaded with Lion OSX and one of the surprises i stepped onto is NTFS write issue on the Mac. Based on a few…]]></description><link>https://prasans.info/make_ntfs_write_mac_lion/</link><guid isPermaLink="false">https://prasans.info/make_ntfs_write_mac_lion/</guid><content:encoded>&lt;p&gt;Just now i got my new MBP pre loaded with Lion OSX and one of the surprises i stepped onto is NTFS write issue on the Mac.&lt;/p&gt;
&lt;p&gt;Based on a few blog posts and comments I managed to find a way that worked for me, so I thought I’d put it all here in one place for others.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pre requisites:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Get &lt;a href=&quot;http://mxcl.github.com/homebrew/&quot; title=&quot;homebrew&quot;&gt;HomeBrew&lt;/a&gt; installed in your machine. And of course this needs XCode tools to be installed.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Steps:&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Install latest Fuse4X (a fork of MacFUSE) and NTFS-3G packages:&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;brew install fuse4x
brew install ntfs-3g&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;Type brew info fuse4x-kext in the terminal. You will be shown a message similar to this:&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;In order for FUSE-based filesystems to work, the fuse4x kernel extension
must be installed by the root user:
sudo cp -rfX /usr/local/Cellar/fuse4x-kext/0.8.13/Library/Extensions/fuse4x.kext /System/Library/Extensions
sudo chmod +s /System/Library/Extensions/fuse4x.kext/Support/load_fuse4x&lt;/p&gt;
&lt;p&gt;Perform both the operation.  &lt;/p&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;And after this i simply followed this &lt;a href=&quot;http://fernandoff.posterous.com/ntfs-write-support-on-osx-lion-with-ntfs-3g-f&quot;&gt;blog post entry&lt;/a&gt;. Since you have already installed Fuse4x and ntfs-3g you can directly jump to&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;“Ok, at this point you should have a functional fuse4x and ntfs-3g install.”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;and create an alternative&lt;/p&gt;
&lt;p&gt;/sbin/ntfs_mount&lt;/p&gt;
&lt;p&gt;script as described there.&lt;br&gt;
And at last you got make one change to get things working.&lt;br&gt;
The script in the bog post is for MacPort users. For HomveBrew users you got to make this change.&lt;br&gt;
replace&lt;/p&gt;
&lt;p&gt;/opt/local/bin/ntfs-3g&lt;/p&gt;
&lt;p&gt;with&lt;/p&gt;
&lt;p&gt;/usr/local/bin/ntfs-3g&lt;/p&gt;
&lt;p&gt;And that’s it. Just try mounting a NTFS drive and you should have write permissions to your drive. If you face any issues check out the log @&lt;/p&gt;
&lt;p&gt;/var/log/ntfsmnt.log&lt;/p&gt;
&lt;p&gt;or try re-booting the machine in the worst case.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Running Windows 8 on VM on Mac Lion]]></title><description><![CDATA[SetUp: Download  VirtualBox  and install it. Get Microsoft  Windows 8 developer edition. The latest VirtualBox has an option to choose…]]></description><link>https://prasans.info/running-windows-8-on-vm-on-mac-lion/</link><guid isPermaLink="false">https://prasans.info/running-windows-8-on-vm-on-mac-lion/</guid><content:encoded>&lt;p&gt;&lt;strong&gt;SetUp:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Download &lt;a href=&quot;https://www.virtualbox.org/wiki/Downloads&quot; title=&quot;virtualbox&quot;&gt;VirtualBox&lt;/a&gt; and install it.&lt;/li&gt;
&lt;li&gt;Get Microsoft &lt;a href=&quot;http://msdn.microsoft.com/en-us/windows/apps/br229516&quot; title=&quot;Windows 8&quot;&gt;Windows 8 developer edition.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;The latest VirtualBox has an option to choose Windows 8 as an operating system, so chose it and locate the Windows iso file.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And also i chose local account for installing as i didn’t have Windows Live ID and thought creating a new one might be time consuming.&lt;/p&gt;
&lt;p&gt;Thats it.&lt;/p&gt;
&lt;p&gt; &lt;a href=&quot;/assets/images/posts/running-windows-8-on-mac/full/image1.png&quot; title=&quot;Windows 8 on Mac&quot;&gt;&lt;img src=&quot;/assets/images/posts/running-windows-8-on-mac/thumbs/image1.png&quot; alt=&quot;Windows 8 on Mac&quot;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;My Thoughts:&lt;/strong&gt;&lt;br&gt;
So far im not too much convinced about the feel of it. Did try hard to map the multitouch touchpad to windows events, but its not seamless.&lt;br&gt;
The horizontal scrolling of the start page is getting stuck frequently. Apart from the brand new start screen i couldn’t find anything interesting.&lt;/p&gt;
&lt;p&gt;Anyways its good to try this stuff.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Slot machine effect using jQuery]]></title><description><![CDATA[Intention: In an yet another cart based web-app, the intention is to make the cart page looks fancier.  Praveen Selvam  came up with this…]]></description><link>https://prasans.info/slot-machine-effect-jquery/</link><guid isPermaLink="false">https://prasans.info/slot-machine-effect-jquery/</guid><content:encoded>&lt;p&gt;&lt;strong&gt;Intention:&lt;/strong&gt;&lt;br&gt;
In an yet another cart based web-app, the intention is to make the cart page looks fancier. &lt;a href=&quot;http://praveenselvam.com&quot; title=&quot;Praveen Selvam&quot;&gt;Praveen Selvam&lt;/a&gt; came up with this idea of slot machine effect in the price section whenever an item been added.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Slot Machine Effect:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Requisite:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;jQuery 1.5+&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Idea:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Create an element to display the animation.&lt;/li&gt;
&lt;li&gt;Next create an empty element say &lt;div&gt;&lt;/div&gt; and set its position: ‘fixed’&lt;/li&gt;
&lt;li&gt;Set the position of the empty element to the Start Value of the slot.&lt;/li&gt;
&lt;li&gt;Now use jQuery animate to move the empty element from Start value to the specified End Value in a given duration.&lt;/li&gt;
&lt;li&gt;jQuery animate has a step() method which gives you the current position of the div for every unit of time.&lt;/li&gt;
&lt;li&gt;Now inside this step() method set the display element’s text to the current position value of the empty element.&lt;/li&gt;
&lt;li&gt;Since empty element moves from start value to end value, you will see the numbers changing from start value to end value in the display area.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Javascript Code:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;$(‘#animate_btn’).click(function() {
cashFlow($(‘.value’), $(‘#startVal’).val(), $(‘#endVal’).val(),
$(‘#duration’).val() * 1000, $(‘#decimal’).val());
});&lt;/p&gt;
&lt;p&gt;cashFlow = function(elem, from, to, duration, decimal) {
var magicObject;
if (typeof magicObject === ‘undefined’) {
magicObject = $(’&lt;div&gt;&lt;/div&gt;‘).appendTo(‘body’);
}
magicObject.css({
position: “fixed”,
left: from
}).animate({
left: to
}, {
duration: duration,
step: function(currentLeft) {
elem.html(Number(currentLeft).toFixed(decimal));
},
complete: function() {
magicObject.remove();
}
});
};&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Writing Custom Tags for JSTLs]]></title><description><![CDATA[First start with writing a tag library descriptor(TLD). A TLD is a XML document that contains information about a library as a whole and…]]></description><link>https://prasans.info/writing-custom-tags-for-jstls/</link><guid isPermaLink="false">https://prasans.info/writing-custom-tags-for-jstls/</guid><content:encoded>&lt;p&gt;First start with writing a tag library descriptor(TLD). A TLD is a XML document that contains information about a library as a whole and about each tag contained in the library.&lt;br&gt;
The structure of the TLD file is pretty readalbe.&lt;/p&gt;
&lt;p&gt;Below is an implementation of tag which takes in a section name(value) of a web page and checks whether the logged-in user has rights to view the section.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Step 1:&lt;/strong&gt; custom.tld&lt;/p&gt;
&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;
&lt;!DOCTYPE taglib PUBLIC &quot;-//Sun Microsystems, Inc.//DTD JSP Tag Library 1.1//EN&quot;
        &quot;http://java.sun.com/j2ee/dtds/web-jsptaglibrary\_1\_1.dtd&quot;&gt;
&lt;taglib xmlns=&quot;http://java.sun.com/j2ee/dtds/web-jsptaglibrary\_1\_1.dtd&quot;&gt;
    &lt;tlibversion&gt;1.0&lt;/tlibversion&gt;
    &lt;jspversion&gt;1.1&lt;/jspversion&gt;
    &lt;shortname&gt;custom&lt;/shortname&gt;
    &lt;info&gt;Custom tag library&lt;/info&gt;
    &lt;tag&gt;
        &lt;name&gt;permission&lt;/name&gt;
        &lt;tagclass&gt;com.prasans.PermissionTag&lt;/tagclass&gt;
        &lt;info&gt;
            Checks the User Permission to access the content.
        &lt;/info&gt;
        &lt;attribute&gt;
            &lt;name&gt;value&lt;/name&gt;
            &lt;required&gt;true&lt;/required&gt;
        &lt;/attribute&gt;
        &lt;attribute&gt;
            &lt;name&gt;invertCondition&lt;/name&gt;
            &lt;required&gt;false&lt;/required&gt;
        &lt;/attribute&gt;
    &lt;/tag&gt;
&lt;/taglib&gt;
&lt;p&gt;Here we have implemented a tag called permission within the ‘custom’ tag library.&lt;/p&gt;
&lt;p&gt;Usage: &lt;em&gt;&amp;#x3C;custom:permission value=&quot;&quot;&gt;{section}&amp;#x3C;/custom:permission&gt;&lt;/em&gt;&lt;br&gt;
Similarly you can add more tags to your library by adding more &lt;tag&gt; nodes.&lt;/p&gt;
&lt;p&gt;After done with defining TLD, next step is to implement the conditional logic. Below is a piece of Java code that does the implementation of the TLD.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Step 2:&lt;/strong&gt; PermissionTag.java&lt;/p&gt;
&lt;p&gt;package com.prasans;&lt;/p&gt;
&lt;p&gt;import javax.servlet.http.HttpServletRequest;
import javax.servlet.jsp.jstl.core.ConditionalTagSupport;&lt;/p&gt;
&lt;p&gt;public class PermissionTag extends ConditionalTagSupport {
private String value = null;
private boolean invertCondition;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;public void setValue(String value) {
    this.value = value;
}

public String getValue() {
    return value;
}

public boolean isInvertCondition() {
    return invertCondition;
}

public void setInvertCondition(boolean invertCondition) {
    this.invertCondition = invertCondition;
}

@Override
protected boolean condition() {
    // If needed you can access Request Object like this.
    HttpServletRequest request = (HttpServletRequest) pageContext.getRequest();
    boolean permission = checkForThePermission(value);
    return invertCondition ? !permission : permission;
}&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;}&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Explanation:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;* Since the expectation of this tag is to return true or false, we are extending the &lt;em&gt;ConditionalTagSupport&lt;/em&gt; class. Based on the need you can choose upon your class implementation.&lt;/p&gt;
&lt;p&gt;*Note that all tag attributes are member variables of the class and all of them should have getters and setters.&lt;/p&gt;
&lt;p&gt;*Here we have overridden the condition() from ConditionalTagSupport to return the needed boolean result.&lt;/p&gt;
&lt;p&gt;* InvertCondition is an attribute that helps us in simulating negative scenarios.&lt;/p&gt;
&lt;p&gt;For ex: “Show the section &lt;em&gt;If User A do not have ‘X’ permission&lt;/em&gt;”&lt;/p&gt;
&lt;p&gt;After building the TLD and its corresponding logic, the next step is to integrate with your application.&lt;br&gt;
Add the custome tag library to your web.xml to integrate with your web app.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Step 3:&lt;/strong&gt; web.xml&lt;/p&gt;
&lt;jsp-config&gt;
    &lt;taglib&gt;
        &lt;taglib-uri&gt;/custom&lt;/taglib-uri&gt;
        &lt;taglib-location&gt;/WEB-INF/tags/custom.tld&lt;/taglib-location&gt;
    &lt;/taglib&gt;
&lt;/jsp-config&gt;
&lt;p&gt;The taglib-uri is the &lt;em&gt;&lt;shortname&gt;&lt;/em&gt; defined in the TLD file. And &lt;em&gt;&lt;taglib-location&gt;&lt;/em&gt; is the location of the tld. Make sure that you are bundling the TLD along with your WAR.&lt;/p&gt;
&lt;p&gt;Thats it. You can start using your custom tags in your JSPs now.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Reloading an activity in Android]]></title><description><![CDATA[More often i wanted to reload an activity to refresh the contents of an page. I have seen many ways to do this in Android world and i always…]]></description><link>https://prasans.info/reloading-an-activity-in-android/</link><guid isPermaLink="false">https://prasans.info/reloading-an-activity-in-android/</guid><content:encoded>&lt;p&gt;More often i wanted to reload an activity to refresh the contents of an page. I have seen many ways to do this in Android world and i always puzzled about the best approach.&lt;/p&gt;
&lt;p&gt;However these are some of the approaches that i took . I found the following two approaches a lot cleaner as they kill the existing intent and restart.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Approach 1:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;
      &lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Intent&lt;/span&gt; intent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getIntent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;finish&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;startActivity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;intent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Approach 2:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;
      &lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Intent&lt;/span&gt; intent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getIntent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;overridePendingTransition&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
intent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addFlags&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Intent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;FLAG\_ACTIVITY\_NO\_ANIMATION&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;finish&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;overridePendingTransition&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;startActivity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;intent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Note:&lt;/strong&gt; The second approach works only from API 5+&lt;/em&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Configuring Context name for an application]]></title><description><![CDATA[Many times i have faced this necessity of  having a different Context name than that of the WAR name. Especially when i use Maven. And i…]]></description><link>https://prasans.info/configuring-context-name-for-an-applicationtomcat-war/</link><guid isPermaLink="false">https://prasans.info/configuring-context-name-for-an-applicationtomcat-war/</guid><content:encoded>&lt;p&gt;Many times i have faced this necessity of  having a different Context name than that of the WAR name. Especially when i use Maven. And i also found that it is quite simple in Tomcat. While looking for it i found two approached for doing it. One using Context.xml and the other using Server.xml&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Problem Statement:&lt;/strong&gt; I have a WAR file myapp-build123.war and the app can be referred using &lt;em&gt;&lt;a href=&quot;http://localhost:8080/myapp-build123&quot;&gt;http://localhost:8080/myapp-build123&lt;/a&gt;&lt;/em&gt; but i need to refer my application as &lt;em&gt;&lt;a href=&quot;http://localhost:8080/myapp&quot;&gt;http://localhost:8080/myapp&lt;/a&gt;&lt;/em&gt; So here is what im gonna do.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Approach 1: &lt;em&gt;Context.xml&lt;/em&gt; (Recommended way)&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Create a Context file in ${TOMCAT_HOME}/conf/Catalina/localhost directory. Name the file as myapp.xml (The file name should be the same as desired context name) The content of the file is given below.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Context &lt;span class=&quot;token assign-left variable&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/somepath&quot;&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;docBase&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/home/myapp-build123&quot;&lt;/span&gt;/&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;em&gt;Basically the path attribute is been ignored by Tomcat so if you want you can ignore it too.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;The docBase will contain the path of the WAR. Here i have placed my WAR file in the home directory.&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;An important thing to note here is that the WAR file cannot be placed inside the ${TOMCAT_HOME}/webapps folder. If you place the WAR in the webapps folder then the war will get exploded with the same name as the WAR file and after that it is not possible to configure the Context name. So place the WAR anywhere in the system apart from ${TOMCAT_HOME}/webapps folder.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;Now its time to start the server and you will see a folder named myapp in the ${TOMCAT_HOME}/webapps folder, containing the application files.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Approach 2: Server.xml ( &lt;a href=&quot;http://tomcat.apache.org/tomcat-6.0-doc/config/context.html&quot;&gt;Not Recommended&lt;/a&gt; after Tomcat 4.x )&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Open the Server.xml file from ${TOMCAT_HOME}/conf folder. Search for the Host tag and place the Context tag inside it.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;xml&quot;&gt;
      &lt;pre class=&quot;language-xml&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Host&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;localhost&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;  &lt;span class=&quot;token attr-name&quot;&gt;appBase&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;webapps&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;unpackWARs&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;true&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;autoDeploy&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;true&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;xmlValidation&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;false&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;xmlNamespaceAware&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;false&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Context&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;/myapp&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;docBase&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;/myapp-build123&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Host&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;In this scenario you can place the WAR file in the ${TOMCAT_HOME}/webapps folder itself. And also it is possible to access the application by both the URLs, &lt;a href=&quot;http://localhost:8080/myapp-build123&quot;&gt;http://localhost:8080/myapp-build123&lt;/a&gt; and &lt;a href=&quot;http://localhost:8080/myapp&quot;&gt;http://localhost:8080/myapp&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[My First Windows 7 Theme]]></title><description><![CDATA[I know its just as simple as bundling some group of images but still this is my first work. Just got these wallpapers from www…]]></description><link>https://prasans.info/my-first-windows-7-theme/</link><guid isPermaLink="false">https://prasans.info/my-first-windows-7-theme/</guid><content:encoded>&lt;p&gt;I know its just as simple as bundling some group of images but still this is my first work. Just got these wallpapers from www.chennaisuperkings.com and created this theme. Though Yellow would be an apt color for background color i went with blue just to make my desktop more pleasant.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;a href=&quot;http://www.4shared.com/file/LXvPHbKo/ChennaiSuperKings.html&quot; title=&quot;Chennai Super Kings Windows Theme&quot;&gt;Chennai Super Kings&lt;/a&gt; (Windows 7 theme)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Anyways here are the steps if you want to give a try in creating your custom theme.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;A theme pack contains following things:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Desktop Wallpaper&lt;/li&gt;
&lt;li&gt;Screensaver&lt;/li&gt;
&lt;li&gt;Sounds&lt;/li&gt;
&lt;li&gt;Slideshows&lt;/li&gt;
&lt;li&gt;Color of the theme&lt;/li&gt;
&lt;li&gt;Mouse Pointers&lt;/li&gt;
&lt;li&gt;Desktop icons&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Steps:&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Right Click on your Desktop and Select Personalize from Menu.&lt;/li&gt;
&lt;li&gt;Now click on desktop background to set background wallpaper, click Browse to locate folder of wallpapers.&lt;/li&gt;
&lt;li&gt;Select check images/wallpapers for slideshow feature in your theme &amp;#x26; save changes.&lt;/li&gt;
&lt;li&gt;Set Windows color to change color of windows, background, and cursor for theme.&lt;/li&gt;
&lt;li&gt;Click on sound to change system sound default.&lt;/li&gt;
&lt;li&gt;Click on Screen Saver to set screen saver for the Theme.&lt;/li&gt;
&lt;li&gt;After setting all the components of the Theme Pack click on save theme option in your personalization window.&lt;/li&gt;
&lt;li&gt;Enter theme name and select themepack as save type.&lt;/li&gt;
&lt;li&gt;Double Click on the theme pack to install it.&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[Primary-key @OneToOne mapping in Hibernate]]></title><description><![CDATA[Today was trying to join two tables using its Primary keys using Hibernate. Here is what I tried to do: @Table(name = “customer”)
@Entity…]]></description><link>https://prasans.info/primary-key-onetoone-mapping-in-hibernate/</link><guid isPermaLink="false">https://prasans.info/primary-key-onetoone-mapping-in-hibernate/</guid><content:encoded>&lt;p&gt;Today was trying to join two tables using its Primary keys using Hibernate. Here is what I tried to do:&lt;/p&gt;
&lt;p&gt;@Table(name = “customer”)
@Entity
public class Customer {
@Id
@OneToOne
@JoinColumn(name = “customer_id”,updatable = false)
private Credentials credentials;
}&lt;/p&gt;
&lt;p&gt;I was constantly getting an error stating invalid column name. Later then I realized that its not possible have Join in the Primary-Key and bind to a custom object. This forced me to have a Auto-generated Id as a key to the table and named it as the primary key. This is how my code looked after modification.&lt;/p&gt;
&lt;p&gt;@Table(name = “customer”)
@Entity
public class Customer {&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private long id;

@OneToOne
@JoinColumn(name = &amp;quot;customer\_id&amp;quot;,updatable = false)
private Credentials credentials;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;}&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Age Of Empires (AOE) Fix in Windows 7]]></title><description><![CDATA[Due to an issue in the Windows 7 Aero theme , the map of the Age Of Empires (AOE) actually renders poorly. The playing area will be laid in…]]></description><link>https://prasans.info/play-age-of-empires-aoe-in-windows-7/</link><guid isPermaLink="false">https://prasans.info/play-age-of-empires-aoe-in-windows-7/</guid><content:encoded>&lt;p&gt;Due to an issue in the Windows 7 Aero theme , the map of the Age Of Empires (AOE) actually renders poorly. The playing area will be laid in patches and the small map in the bottom right won’t show the correct player’s color.&lt;/p&gt;
&lt;p&gt;The fix for this issue is pretty simple.&lt;/p&gt;
&lt;p&gt;* Start the AOE game.&lt;/p&gt;
&lt;p&gt;* Get back to your desktop without closing the game,(by pressing the Windows Key (or) Show Desktop key).&lt;/p&gt;
&lt;p&gt;* Start your task manager . Select the Processes tab. Look for process explorer.exe and kill it.&lt;/p&gt;
&lt;p&gt;* This will hide your desktop icons, taskbar and all other opened windows.&lt;/p&gt;
&lt;p&gt;* Using Alt +Tab get back to the Game. Now the map will be rendered nicely. Enjoy Playing :)&lt;/p&gt;
&lt;p&gt;* After finishing the game , Start Task Manager again. Choose File -&gt; New Task and type explorer.exe in the dialog box.&lt;/p&gt;
&lt;p&gt;*Everything is back to normal.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Wiring Android Wheel Widget into your application.]]></title><description><![CDATA[I just saw this widget ( Android Wheel ) and instantly got attracted to it. Just wanted to get this into my app. So here are the steps i…]]></description><link>https://prasans.info/wiring-android-wheel-widget-into-your-application/</link><guid isPermaLink="false">https://prasans.info/wiring-android-wheel-widget-into-your-application/</guid><content:encoded>&lt;p&gt;I just saw this widget (&lt;a href=&quot;http://code.google.com/p/android-wheel/&quot;&gt;Android Wheel&lt;/a&gt;) and instantly got attracted to it. Just wanted to get this into my app. So here are the steps i followed to integrate this into my application.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Import the project into Eclipse through Svn import (File-&gt;Import) from google-code (&lt;a href=&quot;http://android-wheel.googlecode.com/svn/trunk&quot;&gt;http://android-wheel.googlecode.com/svn/trunk&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Once you import the project in the Eclipse, Right click on the project -&gt; Properties -&gt; Choose android tab and check the IsLibrary option&lt;/li&gt;
&lt;li&gt;Now Right click on your project -&gt; Properties -&gt; Choose android tab -&gt; In the Library section add the imported project.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;That’s it you are good to go now. The Apps in the Wheel Demo are really good enough to guide you through.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Add EditText(s) dynamically and retrieve values - Android]]></title><description><![CDATA[Adding EditText to your Android application is no different from adding any other form elements except for one thing. Retrieving values from…]]></description><link>https://prasans.info/add-edittexts-dynamically-and-retrieve-values-android/</link><guid isPermaLink="false">https://prasans.info/add-edittexts-dynamically-and-retrieve-values-android/</guid><content:encoded>&lt;p&gt;Adding EditText to your Android application is no different from adding any other form elements except for one thing. Retrieving values from them is slightly different and of course nothing impossible. Just a little more bit of coding and thats it.&lt;/p&gt;
&lt;p&gt; &lt;a href=&quot;%22Android-EditText%22&quot;&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/img1-6eaf349184e108a639df8851939c4010-412de.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 387px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 149.35400516795866%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAABJ0AAASdAHeZh94AAAD8UlEQVRIx82UWU9bVxSFDQ88gEBCDALqAsYOgwEzlKL0saXCZchbw+QgxqgSEv+gVaJWdiCE2YBtJmOIIS3glmAbsGNzY9cJVSxmN6XBNrKZnP6H1XOPK5oolSqlfujD0tn37HM/7bX3uZfDMI+ws6/Diy0Gzi0rdpw27L54SmILdrb0+IVZwHOrlmgOdtMMNo2TsOgnYH6swsZPClgNU3hm0UI73YMnq1PgWC2P8POz7+FgTLBb9LAxBjDmFWyaVuCwLoFZIxAiZl1DV/PqJDZWJrD2owpGnRIGoid6NWYne/B4UQGOcnQQ7W1fQdLYiHpJIxqIbpFYImlAfX09WW+RtYGKjRsa3oglEhrXkXNNTU3o6OgAZ0IlR3V1Fa59GA/RtQ+Qy0tEKjcJfL4APB4PycnJJOYjg59BY3ZPIBAgJSUFqWmp4Av4SE9Pp2ptbQVHpRrBzRvleLo8gT8C5zj9zYlNnRqv3F54vR4sLCxgb28PZ2dn0Ol0sNvteB14DaPRCLPZjJOTEwQCAUilUtTU1IAzPj6KL6vFsGoHEfD+Ct+OFRsLKrw8egWP2w2tVovt7W34/X4sLS3BZrPh8uISBoMB6+vr8Hg8uLi4+Bs4PaWAWCyGgJuAj4QZEPKSiOUU5OXlITMzk1oTCoXIycmhcXZWNnJzc8Hlcql19lxWVhbS0tLQ0tICjkY9iYqKSqg1s/CfXeDA9RKzc3P4/egI7mM35ufn4XQ64fP5sLy8DIZhcH5+Ti2vra3h4ODg7QpnpsdRWVkJzcwMTk9P4XK5oNFo4HZ7iNx4OPeQAv0+PxZ/WKSWWYBer6eWXYcuXF5eQiaTBYGqsT6Ul4uRTkouKSmhFrKzs1FUVASRSETj0o9LUVpaSq2ye2yObUF+fj6Ki4tRICqgU25ubiZDUfTj08/KIJfLyVS9dKKHh4fY39+ndliZTCYY9AY4HA7qgM2xZ9jc7u4ujo+P0dnZidra2iCwrOxz3L17h/ZndXWVTpDKaKDW1Go1lEol7Sfbt6u8IZi3WCy0urq6uqBl8RcViIyMREJCAuLi4t5RUlISvdSJiYnv5OLj4xEbG0vX4MUe7aNT5nA4/0lRUVFoa2tjgb1XwLCwsPcS+250dPRfwLHQVHgFVIw8CC1wqP8eKiqrQgd8s4chASpDDVTIe0ILHB3qDi1w5H8PHJPfDy2w/8F35AcbwnvYJf0aVdU36GZ4ePh7iX03JiYmCOy9/21ILEdERKC9nQC7ZXdws6YOBYVFKCwqflvs3r+JnBMVFOL69U9IhbfJUIbvoYtA2W96sE+GAVa9Uvo8PNh9Jfk/aHigG0MDXfTsQK8MXdJv8CeghlGfkSqx6QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;&quot;
        alt=&quot;Android-EditText&quot;
        title=&quot;&quot;
        src=&quot;/static/img1-6eaf349184e108a639df8851939c4010-412de.png&quot;
        srcset=&quot;/static/img1-6eaf349184e108a639df8851939c4010-7efff.png 200w,
/static/img1-6eaf349184e108a639df8851939c4010-412de.png 387w&quot;
        sizes=&quot;(max-width: 387px) 100vw, 387px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/a&gt; &lt;/p&gt;
&lt;p&gt;Following code snippet creates a series of EditTexts and also let you to access its values.  &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;
      &lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;android&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;app&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Activity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;android&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;os&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Bundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;android&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;view&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;android&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;view&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ViewGroup&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;android&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;widget&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;android&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;widget&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;EditText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;android&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;widget&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;LinearLayout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;android&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;widget&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;TableLayout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;android&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;widget&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;TableRow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;util&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ArrayList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;util&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;android&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;view&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ViewGroup&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;LayoutParams&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;FILL\_PARENT&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;android&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;view&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ViewGroup&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;LayoutParams&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;WRAP\_CONTENT&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;android&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;widget&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;LinearLayout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;VERTICAL&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Sample&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Activity&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;EditText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; editTextList &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ArrayList&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;EditText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onCreate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Bundle&lt;/span&gt; savedInstanceState&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onCreate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;savedInstanceState&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;LinearLayout&lt;/span&gt; linearLayout &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LinearLayout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;ViewGroup&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;LayoutParams&lt;/span&gt; params &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ViewGroup&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;LayoutParams&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;FILL\_PARENT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; WRAP\_CONTENT&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        linearLayout&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setLayoutParams&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        linearLayout&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setOrientation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;VERTICAL&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        linearLayout&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;tableLayout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        linearLayout&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submitButton&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;setContentView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;linearLayout&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Button&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;submitButton&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Button&lt;/span&gt; button &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        button&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setHeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;WRAP\_CONTENT&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        button&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Submit&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        button&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setOnClickListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;submitListener&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; button&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Access the value of the EditText&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;OnClickListener&lt;/span&gt; submitListener &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;OnClickListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;View&lt;/span&gt; view&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;StringBuilder&lt;/span&gt; stringBuilder &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StringBuilder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;EditText&lt;/span&gt; editText &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; editTextList&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                stringBuilder&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;editText&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Using a TableLayout as it provides you with a neat ordering structure&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TableLayout&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;tableLayout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; count&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;TableLayout&lt;/span&gt; tableLayout &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TableLayout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        tableLayout&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setStretchAllColumns&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; noOfRows &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; noOfRows&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; rowId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt; \&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            tableLayout&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createOneFullRow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rowId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; individualCells &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        tableLayout&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createLeftOverCells&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;individualCells&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; count&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; tableLayout&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TableRow&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createLeftOverCells&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; individualCells&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; count&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;TableRow&lt;/span&gt; tableRow &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TableRow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        tableRow&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setPadding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; rowId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; individualCells&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; individualCells&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            tableRow&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;editText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;valueOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rowId &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; tableRow&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TableRow&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createOneFullRow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; rowId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;TableRow&lt;/span&gt; tableRow &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TableRow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        tableRow&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setPadding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            tableRow&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;editText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;valueOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rowId &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; tableRow&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EditText&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;editText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; hint&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;EditText&lt;/span&gt; editText &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EditText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        editText&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;valueOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;hint&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        editText&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setHint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;hint&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        editTextList&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;editText&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; editText&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;</content:encoded></item><item><title><![CDATA[Test your Controller's ModelAttribute methods.]]></title><description><![CDATA[I was about to write some unit tests around my Spring’s controller classes and also i wanted to write the test using MockHttpRequest and…]]></description><link>https://prasans.info/test-your-controllers-modelattribute-methods/</link><guid isPermaLink="false">https://prasans.info/test-your-controllers-modelattribute-methods/</guid><content:encoded>&lt;p&gt;I was about to write some unit tests around my Spring’s controller classes and also i wanted to write the test using MockHttpRequest and MockHttpResponse.&lt;/p&gt;
&lt;p&gt;My controller had a method to which i was using ModelAttribute as one of the parameter. I just want to simulate the same scenario in my Unit Tests.&lt;/p&gt;
&lt;p&gt;Unfortunately i could not see any methods in MockHttpRequest to help me with this. So i had to take a simple different approach as an workaround for this.&lt;/p&gt;
&lt;p&gt;My Controller code looks similar to this:&lt;/p&gt;
&lt;p&gt;@Controller
@RequestMapping(value = “/register”)
public class MyController {
@RequestMapping(value = “/save”, method = RequestMethod.POST)
public ModelAndView save(@ModelAttribute User user) {
//Code to save the User object
return new ModelAndView();
}
}&lt;/p&gt;
&lt;p&gt;My Unit Tests:&lt;/p&gt;
&lt;p&gt;public class MyControllerTest {
MockHttpServletResponse response;
MockHttpServletRequest request;
AnnotationMethodHandlerAdapter handler;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;@Before
public final void init() {
    response = new MockHttpServletResponse();
    request = new MockHttpServletRequest();
    handler = new AnnotationMethodHandlerAdapter();
}

@Test
public void shouldTestSaveUser() {
    final User mockUser = new UserTestBuilder().withName(&amp;quot;John&amp;quot;).build();
    request.setMethod(&amp;quot;POST&amp;quot;);
    request.setRequestURI(&amp;quot;/register/save&amp;quot;);

    MyController myController = new MyController() {
        @ModelAttribute
        public User mockModel() {
            return user;
        }
    }
    ModelAndView model = handler.handle(request, response, myController);
}&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;}&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Explanation:&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Whenever a method in a controller is annotated with @ModelAttribute , it will be invoked for every request made to that controller. So while creating the mycontroller object i am overriding a sample method which has this annotation and returns a User object as a ModelAttribute.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Hadoop Version in AWS Map Reduce]]></title><description><![CDATA[Creating job flows using AWS MapReduce’s GUI is pretty simple and very straight forward. But i wanted to use Java SDK to create/run jobs in…]]></description><link>https://prasans.info/hadoop-version-in-aws-map-reduce/</link><guid isPermaLink="false">https://prasans.info/hadoop-version-in-aws-map-reduce/</guid><content:encoded>&lt;p&gt;Creating job flows using AWS MapReduce’s GUI is pretty simple and very straight forward. But i wanted to use Java SDK to create/run jobs in MapReduce. I could successfully able set up the job and configured all the parameters except for a weird error.&lt;/p&gt;
&lt;p&gt;java.lang.NoSuchMethodError:
org.apache.hadoop.mapred.JobConf.
setBooleanIfUnset(Ljava/lang/String;Z)V&lt;/p&gt;
&lt;p&gt;I was constantly getting this error while running the job. Initially i had no idea why this error occurs and none of the forum talks about it either. Then i figured out that the default Hadoop version used by the Ec2 instances was 0.18 and i was expecting 0.20. Interestingly i didn’t face this issue when i did it through GUI.&lt;/p&gt;
&lt;p&gt;As a solution i need to explicitly set the version number as 0.20 to the Instances object so that it will use the same while running the job.&lt;/p&gt;
&lt;p&gt;JobFlowInstancesConfig instances = new JobFlowInstancesConfig();
instances.setHadoopVersion(“0.20”);&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Install Custom JAR files in Samsung Corby Pro]]></title><description><![CDATA[Installing jar applications using Corby Pro is not straightforward. I tried multiple ways and finally found an easy solution !!! In your PC…]]></description><link>https://prasans.info/install-custom-jar-files-in-samsung-corby-pro/</link><guid isPermaLink="false">https://prasans.info/install-custom-jar-files-in-samsung-corby-pro/</guid><content:encoded>&lt;p&gt;Installing jar applications using Corby Pro is not straightforward. I tried multiple ways and finally found an easy solution !!!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;In your PC.&lt;/strong&gt;&lt;br&gt;
* Download a jar ( Check whether it will work with Smasung Corby)&lt;br&gt;
* Create a HTML file as mentioned below.&lt;/p&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;a href=&quot;jar\_name.jar&quot;&gt;Jar Name&lt;/a&gt;
  &lt;/body&gt;
&lt;/html&gt;
&lt;p&gt;* Now transfer both these files to your mobile phone. (Make sure you have both these files in the same location/folder)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;In your Mobile:&lt;/strong&gt;&lt;br&gt;
* Navigate to your HTML file and click to open it on your browser.&lt;br&gt;
* You can see a link on your browser with the Jar Name you specified in the HTML.&lt;br&gt;
* Click on the link and you are done !!!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[SAX parser characters() method.]]></title><description><![CDATA[Was playing around SAX parsing some Gigs of XML file 😅 Here are few learnings from the game. My intention was to read values between a…]]></description><link>https://prasans.info/sax-parser-characters-method/</link><guid isPermaLink="false">https://prasans.info/sax-parser-characters-method/</guid><content:encoded>&lt;p&gt;Was playing around SAX parsing some Gigs of XML file 😅 Here are few learnings from the game.&lt;/p&gt;
&lt;p&gt;My intention was to read values between a corresponding tag. I initially went after using characters() in SAX parser which actually worked fine for initial feeds. But as i keep increasing the size of the XMLs and if the size of the tagContent was large the problem arises. characters() function not always gives back the entire value in a single shot. It may return the value in multiple chunks. So need to be careful in assigning and using the values from characters() method.&lt;/p&gt;
&lt;p&gt;So the better way to use characters() method is to keep appending all the values to a buffer and use the value in the corresponding end tag section. Also need to make sure that the buffer has to be flushed in the corresponding start element.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Sample Xml:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;xml&quot;&gt;
      &lt;pre class=&quot;language-xml&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Sample&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;StudentCollection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Student&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Jack&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Age&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;12&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Age&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Student&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Student&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Jill&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Age&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;13&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Age&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Student&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Student&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Rose&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Age&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;14&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Age&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Student&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;StudentCollection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Sample&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Sample SAX handler code to print the Names:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Initial Code: (Works fine for small values &amp;#x26; small files)&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;
      &lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;startElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; uri&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; tag&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; qName&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Attributes&lt;/span&gt; attributes&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;characters&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;char&lt;/span&gt; ch&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; start&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Name of a student: &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ch&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; start&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;endElements&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; uri&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; tag&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; qName&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Final Code:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;
      &lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;startElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; uri&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; tag&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; qName&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Attributes&lt;/span&gt; attributes&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tag&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    tagContentBuffer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StringBuffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;characters&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;char&lt;/span&gt; ch&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; start&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  tagContentBuffer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ch&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; start&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;endElements&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; uri&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; tag&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; qName&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tag&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Name of a student: &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
       tagContentBuffer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;</content:encoded></item><item><title><![CDATA[FTP Client (Ubuntu)]]></title><description><![CDATA[Today was about to download multiple files from an authenticated FTP server. The native ftp client of Ubuntu didn’t help me as expected. I…]]></description><link>https://prasans.info/ftp-client-ubuntu/</link><guid isPermaLink="false">https://prasans.info/ftp-client-ubuntu/</guid><content:encoded>&lt;p&gt;Today was about to download multiple files from an authenticated FTP server. The native ftp client of Ubuntu didn’t help me as expected. I was trying to log into the FTP server and was constantly getting disconnected when trying to perform some operation. When browsed for some alternative found this ncftp client. This actually worked instantly and was pretty easy in installing.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;Install NCFTP:&lt;/em&gt;&lt;/strong&gt;&lt;br&gt;
sudo apt-get install ncftp&lt;/p&gt;
&lt;p&gt;**&lt;em&gt;Log into FTP server:&lt;/em&gt; **&lt;br&gt;
ncftp -u username hostname -p  &lt;/p&gt;
&lt;p&gt;it will prompt for password enter it. Type ’?’ in the terminal for the list of commands and there you go :)&lt;/p&gt;
&lt;p&gt;Check out the NCFTP client for other platforms.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Stop halting at Assertions]]></title><description><![CDATA[When i was writing functional tests i stepped into a scenario where i have to continue with the test even after an assertion failure. The…]]></description><link>https://prasans.info/stop-halting-at-assertions/</link><guid isPermaLink="false">https://prasans.info/stop-halting-at-assertions/</guid><content:encoded>&lt;p&gt;When i was writing functional tests i stepped into a scenario where i have to continue with the test even after an assertion failure. The idea here is that you find an assertion failing, still you may need to go ahead and check out all the assertions as these tests generally take long time to complete. At the end of the test it will be good to have the summary of all the failures along with the stack trace. I was looking for some testing framework to help out with this functionality but unfortunately cant find any.&lt;/p&gt;
&lt;p&gt;Finally using TestNg i implemented this feature. All you need is to write a listener that listens whenever a test fails and simply logs the stack trace without failing the test. There is a neat step by step tutorial given &lt;a href=&quot;http://seleniumexamples.com/blog/guide/using-soft-assertions-in-testng&quot;&gt;here &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Though this example has some specific information for Selenium based tests, it works fine with normal functional tests too.&lt;/p&gt;
&lt;p&gt;Happy Testing :)&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Send your mail later]]></title><description><![CDATA[Gmail has provided a lot of features through labs and one important feature it lacks will be “Send Mail Later” option. This kind of feature…]]></description><link>https://prasans.info/send-your-mail-later/</link><guid isPermaLink="false">https://prasans.info/send-your-mail-later/</guid><content:encoded>&lt;p&gt;Gmail has provided a lot of features through labs and one important feature it lacks will be “Send Mail Later” option. This kind of feature helps me a lot to send birthday wishes to my pals. As i tend to remember their birthdays on the previous day and miserably forgets on their birthday. So i was in a hunt to get this functionality but felt bitter when knew that Gmail did not and will not come up such feature as many feel this as a unwanted feature and may be misused.&lt;/p&gt;
&lt;p&gt;But to my rescue comes ’&lt;a href=&quot;http://www.lettermelater.com/&quot;&gt;www.lettermelater.com&lt;/a&gt;” . All I need to do was that register with them with the email id from which i wish to send the mail . I need not want to login to their site every time when i want to send a mail. All i want to do is just address the mail to “me@lettermelater.com” with some parameters. The parameters include the recipient address and the time at which the mail has to be sent. It was super cool as i did a lot of testing by changing the parameter values. Worked perfectly well. They also have this functionality packed as a widget so that one can fit into their site/blog. Their only concern is that it is not possible to send a mail with attachment which we can expect in their future releases.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Printing multiple divs in a page.]]></title><description><![CDATA[I stumbled upon a situation where i have to print multiple sections of a page into a single document. I actually tried out my own javascript…]]></description><link>https://prasans.info/printing-multiple-divs-in-a-page/</link><guid isPermaLink="false">https://prasans.info/printing-multiple-divs-in-a-page/</guid><content:encoded>&lt;p&gt;I stumbled upon a situation where i have to print multiple sections of a page into a single document. I actually tried out my own javascript to render only the required divs into an iframe and then the idea is to print that iframe calling &lt;em&gt;window.print()&lt;/em&gt; in that iframe.&lt;/p&gt;
&lt;p&gt;Having limited Javascript knowledge the above mentioned task was a bit tedious to me , then i sat upon googling to get a ready made plugin that implements this feature and my search ended upon &lt;a href=&quot;http://plugins.jquery.com/project/jqPrint&quot;&gt;Jqprint&lt;/a&gt;. Jqprint is a plugin written in Jquery and it does the same that i mentioned above. Using this jqprint was really very easy. what all you need to do is that just mark all the divs that you want to print with a specific class name or with id. If your classname is printdiv then all you need to do is just call  &lt;em&gt;$(“.printdiv”).jqprint();&lt;/em&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Tweaking IntelliJ appearance to look cool in Ubuntu]]></title><description><![CDATA[When i initially installed IntelliJ in Ubuntu the font of the IDE really sucked. I couldn’t able to concentrate on my work because of the…]]></description><link>https://prasans.info/tweaking-intellij-appearance-to-look-cool-in-ubuntu/</link><guid isPermaLink="false">https://prasans.info/tweaking-intellij-appearance-to-look-cool-in-ubuntu/</guid><content:encoded>&lt;p&gt;When i initially installed IntelliJ in Ubuntu the font of the IDE really sucked. I couldn’t able to concentrate on my work because of the freaking font style. After looking out various forums and blogs i finally did a revamp to my Intellij that looked perfect to me. Here is a screenshot of my IDEA after modification.  &lt;/p&gt;
&lt;p&gt; &lt;a href=&quot;/assets/images/posts/tweaking-intellij-appearance-ubuntu/full/image1.png&quot; title=&quot;Intellj on Ubuntu&quot;&gt;&lt;img src=&quot;/assets/images/posts/tweaking-intellij-appearance-ubuntu/thumbs/image1.png&quot; alt=&quot;Intellj on Ubuntu&quot;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;If you are facing same issues try out these steps and your life with IDEA will be much better.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Open the file idea.vmoptions.&lt;br&gt;
&lt;em&gt;cd {IDEA directory}/bin&lt;/em&gt;&lt;br&gt;
_&lt;/p&gt;
&lt;p&gt;&lt;em&gt;sudo vim idea.vmoptions&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;_&lt;/p&gt;
&lt;p&gt;Add ’&lt;em&gt;-Dawt.useSystemAAFontSettings=on’&lt;/em&gt; (without quotes) to the end of file.&lt;/p&gt;
&lt;p&gt;Save and exit the editor.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Install &lt;a href=&quot;/2009/12/install-inconsolata-ttf-in-ubuntujaunty/&quot;&gt;Inconsolata.ttf to Ubuntu.&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Goto &lt;em&gt;System -&gt; Preferences -&gt; Appearance&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Goto the Fonts tab and click on Details and set your Resolution to 120 DPI.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Open IntellijIDEA. Goto Project &lt;em&gt;Settings -&gt; Colors &amp;#x26; Fonts&lt;/em&gt; Select General tab and Click on the button near the Name textbox.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Uncheck the ’&lt;em&gt;Show Only Monospaced Fonts&lt;/em&gt;’ . Now you will find Inconsolata in the list . Select &lt;strong&gt;Inconsolata&lt;/strong&gt; as font , Set Size to &lt;strong&gt;16&lt;/strong&gt; and Line Spacing to &lt;strong&gt;1.0&lt;/strong&gt; then click on Apply.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Back in the &lt;em&gt;Settings&lt;/em&gt; menu choose Appearance and Select ’&lt;strong&gt;&lt;em&gt;Use Anti-Aliased Font in Editor&lt;/em&gt;&lt;/strong&gt;’ option.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thats it. You are done.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Install Inconsolata.ttf in Ubuntu(Jaunty).]]></title><description><![CDATA[As developers tend to spend most of the time in front of IDEs it makes sense to pick up the best suited font for development. And i have…]]></description><link>https://prasans.info/install-inconsolata-ttf-in-ubuntujaunty/</link><guid isPermaLink="false">https://prasans.info/install-inconsolata-ttf-in-ubuntujaunty/</guid><content:encoded>&lt;p&gt;As developers tend to spend most of the time in front of IDEs it makes sense to pick up the best suited font for development. And i have seen most of the developers prefer to use monochrome fonts as it yields better feel while looking at the code. It is been now widely accepted by many developers to use Inconsolata as their development font. So better start using it and prove yourself geeky ;)&lt;br&gt;
When i tried to use Inconsolata with my IntellijIDEA i couldn’t find the ttf type inconsolata. And Intellij supports only ttf types. After a long search i downloaded thr ODf type and converted it to ttf using a converter and then i had the issue of installing it to my Jaunty. And i took help of my dev friends out here to resolve stuffs. So thought of consolidating the steps together as it may reduce someone else’s pain.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Steps to install Inconsolata.ttf in Ubuntu(Jaunty).&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Step 1:&lt;/strong&gt; Start with downloading inconsolata font. &lt;a href=&quot;http://www.4shared.com/file/xnMYNL0w/Inconsolata.html&quot;&gt;Inconsolata.ttf&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Step 2:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;mkdir /usr/share/fonts/truetype&lt;/p&gt;
&lt;p&gt;cd /usr/share/fonts/truetype&lt;/p&gt;
&lt;p&gt;sudo mkdir  ttf-inconsolata&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Step 3:&lt;/strong&gt; Copy the Inconsolata.ttf into the directory.&lt;/p&gt;
&lt;p&gt;sudo cp ~/Desktop/Inconsolata.ttf ttf-inconsolata&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Step 4:&lt;/strong&gt; Now modify the permissions to allow it to be accessed by IDE’s&lt;/p&gt;
&lt;p&gt;cd ttf-inconsolata&lt;/p&gt;
&lt;p&gt;sudo chmod 777 Inconsolata.ttf&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Step 5:&lt;/strong&gt;Its not over yet. Finally before going to the IDE you need to cache the font to make it accessible.&lt;/p&gt;
&lt;p&gt;sudo fc-cache -f -v&lt;/p&gt;
&lt;p&gt;This will show a list of fonts cached recently. Check whether Inconsolata.ttf is been cached.&lt;/p&gt;
&lt;p&gt;Now you can keep staring at your code for a long time as it feels a lot better :)&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Enabling Yahoo Accounts On Ubuntu]]></title><description><![CDATA[Only after started using Ubuntu i came to know about the existence of Pidgin Internet Messenger(:P). I was pretty much happy as i it allowed…]]></description><link>https://prasans.info/enabling-yahoo-accounts-on-ubuntu/</link><guid isPermaLink="false">https://prasans.info/enabling-yahoo-accounts-on-ubuntu/</guid><content:encoded>&lt;p&gt;Only after started using Ubuntu i came to know about the existence of Pidgin Internet Messenger(:P). I was pretty much happy as i it allowed to consolidate all my google and yahoo accounts together as a single IM. But I have to make some small hacks to enable my Yahoo account on Pidgin Internet Messenger (2.6.3)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Goto Pidgin Messenger -&gt; Accounts&lt;/li&gt;
&lt;li&gt;Manage Accounts -&gt; Add&lt;/li&gt;
&lt;li&gt;In the Basic tab enter Protocol As Yahoo&lt;/li&gt;
&lt;li&gt;Enter your User name and Password&lt;/li&gt;
&lt;li&gt;In the Advanced Tab enter the details as shown in the screenshot.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;a href=&quot;/assets/images/posts/enable-yahoo-accounts/full/image1.png&quot; title=&quot;Yahoo settings&quot;&gt;&lt;img src=&quot;/assets/images/posts/enable-yahoo-accounts/thumbs/image1.png&quot; alt=&quot;Yahoo settings&quot;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;Now you can access your Yahoo account through Pidgin.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Test SMTP server]]></title><description><![CDATA[I came across testing a feature that ends up sending a mail. And to my misfortune i do not have access to the smtp server from my test…]]></description><link>https://prasans.info/test-smtp-server/</link><guid isPermaLink="false">https://prasans.info/test-smtp-server/</guid><content:encoded>&lt;p&gt;I came across testing a feature that ends up sending a mail. And to my misfortune i do not have access to the smtp server from my test environment. So i was looking out for a mock smtp server kind of stuff and ended up happily with test smtp server.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.aboutmyip.com/AboutMyXApp/DevNullSmtp.jsp&quot;&gt;Devnull SMTP server&lt;/a&gt; is a dummy SMTP server that can be used for testing purposes. It helps you see all communication between a client and the server and is very useful if you are trying to find problems with your email server or a client that you wrote. And the best part is it is very simple to use and it is free of cost too. So if you have any such necessity do try this out.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[First Post]]></title><description><![CDATA[So after writing lots of shits and craps in various blogs now I have decided to have my own blog (another one :P) to continue writing those…]]></description><link>https://prasans.info/first-post/</link><guid isPermaLink="false">https://prasans.info/first-post/</guid><content:encoded>&lt;p&gt;So after writing lots of shits and craps in various blogs now I have decided to have my own blog (another one :P) to continue writing those same shits and craps.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Disclaimer:&lt;/strong&gt; All the writings made in this blog are my own thoughts, opinions, views, suggestions, impressions, feelings, beliefs, faiths, sentiments, notions, thinking and ideas. In short this blog is written by me considering myself as its only reader. If you accidently landed on any of the posts here I’m not responsible for its consequences.&lt;/p&gt;</content:encoded></item></channel></rss>